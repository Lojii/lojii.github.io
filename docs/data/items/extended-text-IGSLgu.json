{
  "id": "extended-text-IGSLgu",
  "type": "repo",
  "name": "extended_text",
  "nameEn": "extended_text",
  "url": "https://github.com/fluttercandies/extended_text",
  "summary": "官方Text扩展组件，支持特殊文本效果（比如图片，@人）,自定义背景，自定义文本溢出效果,文本选择以及自定义选择菜单和选择器",
  "description": "在线预览地址：https://fluttercandies.github.io/extended_text/#fluttercandies://mainpage\n\n",
  "notes": "",
  "images": [
    "/assets/images/extended-text-IGSLgu/1.jpg",
    "/assets/images/extended-text-IGSLgu/2.jpg",
    "/assets/images/extended-text-IGSLgu/3.jpg"
  ],
  "thumbnail": "/assets/images/extended-text-IGSLgu/thumb.jpg",
  "category": "flutter",
  "tags": [
    "flutter",
    "inline-image",
    "overflow-text",
    "richtext",
    "selection",
    "toolbar"
  ],
  "github": {
    "stars": 716,
    "forks": 142,
    "language": "Dart",
    "license": "MIT",
    "lastUpdate": "2026-01-13",
    "topics": [
      "flutter",
      "inline-image",
      "overflow-text",
      "richtext",
      "selection",
      "toolbar"
    ],
    "createdAt": "2019-03-12"
  },
  "archived": false,
  "createdAt": "2026-01-22",
  "updatedAt": "2026-01-22",
  "originalContent": "<div id=\"readme\" class=\"md\" data-path=\"README.md\"><article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">extended_text</h1><a id=\"user-content-extended_text\" class=\"anchor\" aria-label=\"Permalink: extended_text\" href=\"#extended_text\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a href=\"https://pub.dartlang.org/packages/extended_text\" rel=\"nofollow\"><img src=\"https://camo.githubusercontent.com/a99ae35facb89bae5f2f635a7af5d437c07d67cf29e14b9bbc65c87dc1ef63f1/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f657874656e6465645f746578742e737667\" alt=\"pub package\" data-canonical-src=\"https://img.shields.io/pub/v/extended_text.svg\" style=\"max-width: 100%;\"></a> <a href=\"https://github.com/fluttercandies/extended_text/stargazers\"><img src=\"https://camo.githubusercontent.com/a74b5a462aa648acc80ccf01a9fe5728d3cee70ecfd7d4f011bd0a12c8090abd/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f666c757474657263616e646965732f657874656e6465645f74657874\" alt=\"GitHub stars\" data-canonical-src=\"https://img.shields.io/github/stars/fluttercandies/extended_text\" style=\"max-width: 100%;\"></a> <a href=\"https://github.com/fluttercandies/extended_text/network\"><img src=\"https://camo.githubusercontent.com/fc94ed3fb83a769ba6cfad2dc109340e452bbf810e4a4a4a01497acadd8a4597/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f666c757474657263616e646965732f657874656e6465645f74657874\" alt=\"GitHub forks\" data-canonical-src=\"https://img.shields.io/github/forks/fluttercandies/extended_text\" style=\"max-width: 100%;\"></a>  <a href=\"https://github.com/fluttercandies/extended_text/blob/master/LICENSE\"><img src=\"https://camo.githubusercontent.com/4c2291529217769e2646bc1b10116749305a6d7e51e377a32324688302c828d5/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f666c757474657263616e646965732f657874656e6465645f74657874\" alt=\"GitHub license\" data-canonical-src=\"https://img.shields.io/github/license/fluttercandies/extended_text\" style=\"max-width: 100%;\"></a>  <a href=\"https://github.com/fluttercandies/extended_text/issues\"><img src=\"https://camo.githubusercontent.com/92f5b24ab89ac7af0bc4eefeaa00ca8da6c8eab6d37697a39e247ef09ea9bb4c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f666c757474657263616e646965732f657874656e6465645f74657874\" alt=\"GitHub issues\" data-canonical-src=\"https://img.shields.io/github/issues/fluttercandies/extended_text\" style=\"max-width: 100%;\"></a> <a href=\"https://qm.qq.com/q/ZyJbSVjfSU\" rel=\"nofollow\"><img src=\"https://camo.githubusercontent.com/97f83e0ff7ce7b543327021d277a114680a2350ff796eed4c5cdc01cbc4fa9a1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f64796e616d69632f79616d6c3f75726c3d68747470732533412532462532467261772e67697468756275736572636f6e74656e742e636f6d253246666c757474657263616e646965732532462e6769746875622532467265667325324668656164732532466d61696e253246646174612e796d6c2671756572793d2532342e71715f67726f75705f6e756d626572266c6162656c3d5151254537254245254134266c6f676f3d717126636f6c6f723d314441434538\" alt=\"FlutterCandies QQ 群\" data-canonical-src=\"https://img.shields.io/badge/dynamic/yaml?url=https%3A%2F%2Fraw.githubusercontent.com%2Ffluttercandies%2F.github%2Frefs%2Fheads%2Fmain%2Fdata.yml&amp;query=%24.qq_group_number&amp;label=QQ%E7%BE%A4&amp;logo=qq&amp;color=1DACE8\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">Language: English | <a href=\"https://github.com/fluttercandies/extended_text/blob/HEAD/README-ZH.md\">中文简体</a></p>\n<p dir=\"auto\">Extended official text to build special text like inline image or @somebody quickly,it also support custom background,custom over flow and custom selection toolbar and handles.</p>\n<p dir=\"auto\"><a href=\"https://fluttercandies.github.io/extended_text/\" rel=\"nofollow\">Web demo for ExtendedText</a></p>\n<p dir=\"auto\">ExtendedText is a third-party extension library for Flutter's official Text component. The main extended features are as follows:</p>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>Feature</th>\n<th>ExtendedText</th>\n<th>Text</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Customized text overflow effects</td>\n<td>Supported, allows customizing the overflow widget and controlling overflow positions (before, middle, after)</td>\n<td>Not supported (<a href=\"https://github.com/flutter/flutter/issues/26748\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/26748/hovercard\">26748</a>,<a href=\"https://github.com/flutter/flutter/issues/45336\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/45336/hovercard\">45336</a>)</td>\n</tr>\n<tr>\n<td>Copying the actual value of special text</td>\n<td>Supported, enables copying the actual value of the text, not just the placeholder value of WidgetSpan</td>\n<td>Can only copy the placeholder value of WidgetSpan (\\uFFFC)</td>\n</tr>\n<tr>\n<td>Quick construction of rich text based on text format</td>\n<td>Supported, enables quick construction of rich text based on text format</td>\n<td>Not supported</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<blockquote>\n<p dir=\"auto\"><code>HarmonyOS</code> is supported. Please use the latest version which contains <code>ohos</code> tag. You can check it in <code>Versions</code> tab.</p>\n</blockquote>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"dependencies:\n  extended_text: 10.0.1-ohos //  3.7.12\n  extended_text: 13.0.2      //  3.22.0\"><pre><span class=\"pl-ent\">dependencies</span>:\n  <span class=\"pl-ent\">extended_text</span>: <span class=\"pl-s\">10.0.1-ohos //  3.7.12</span>\n  <span class=\"pl-ent\">extended_text</span>: <span class=\"pl-s\">13.0.2      //  3.22.0</span></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Table of contents</h2><a id=\"user-content-table-of-contents\" class=\"anchor\" aria-label=\"Permalink: Table of contents\" href=\"#table-of-contents\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><a href=\"#extended_text\">extended_text</a>\n<ul dir=\"auto\">\n<li><a href=\"#table-of-contents\">Table of contents</a></li>\n<li><a href=\"#speical-text\">Speical Text</a>\n<ul dir=\"auto\">\n<li><a href=\"#create-speical-text\">Create Speical Text</a></li>\n<li><a href=\"#specialtextspanbuilder\">SpecialTextSpanBuilder</a></li>\n</ul>\n</li>\n<li><a href=\"#image\">Image</a>\n<ul dir=\"auto\">\n<li><a href=\"#imagespan\">ImageSpan</a></li>\n</ul>\n</li>\n<li><a href=\"#selection\">Selection</a>\n<ul dir=\"auto\">\n<li><a href=\"#textselectioncontrols\">TextSelectionControls</a></li>\n</ul>\n</li>\n<li><a href=\"#custom-background\">Custom Background</a></li>\n<li><a href=\"#custom-overflow\">Custom Overflow</a></li>\n<li><a href=\"#join-zero-width-space\">Join Zero-Width Space</a></li>\n<li><a href=\"#gradient\">Gradient</a>\n<ul dir=\"auto\">\n<li><a href=\"#gradientconfig\">GradientConfig</a></li>\n<li><a href=\"#ignoregradientspan\">IgnoreGradientSpan</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Speical Text</h2><a id=\"user-content-speical-text\" class=\"anchor\" aria-label=\"Permalink: Speical Text\" href=\"#speical-text\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/special_text.jpg\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/special_text.jpg\" alt=\"\" style=\"max-width: 100%;\"></a></p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Create Speical Text</h3><a id=\"user-content-create-speical-text\" class=\"anchor\" aria-label=\"Permalink: Create Speical Text\" href=\"#create-speical-text\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">extended text helps to convert your text to speical textSpan quickly.</p>\n<p dir=\"auto\">for example, follwing code show how to create @xxxx speical textSpan.</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class AtText extends SpecialText {\n  AtText(TextStyle textStyle, SpecialTextGestureTapCallback onTap,\n      {this.showAtBackground = false, this.start})\n      : super(flag, ' ', textStyle, onTap: onTap);\n  static const String flag = '@';\n  final int start;\n\n  /// whether show background for @somebody\n  final bool showAtBackground;\n\n  @override\n  InlineSpan finishText() {\n    final TextStyle textStyle =\n        this.textStyle?.copyWith(color: Colors.blue, fontSize: 16.0);\n\n    final String atText = toString();\n\n    return showAtBackground\n        ? BackgroundTextSpan(\n            background: Paint()..color = Colors.blue.withOpacity(0.15),\n            text: atText,\n            actualText: atText,\n            start: start,\n\n            ///caret can move into special text\n            deleteAll: true,\n            style: textStyle,\n            recognizer: (TapGestureRecognizer()\n              ..onTap = () {\n                if (onTap != null) {\n                  onTap(atText);\n                }\n              }))\n        : SpecialTextSpan(\n            text: atText,\n            actualText: atText,\n            start: start,\n            style: textStyle,\n            recognizer: (TapGestureRecognizer()\n              ..onTap = () {\n                if (onTap != null) {\n                  onTap(atText);\n                }\n              }));\n  }\n}\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-c1\">AtText</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">SpecialText</span> {\n  <span class=\"pl-c1\">AtText</span>(<span class=\"pl-c1\">TextStyle</span> textStyle, <span class=\"pl-c1\">SpecialTextGestureTapCallback</span> onTap,\n      {<span class=\"pl-c1\">this</span>.showAtBackground <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>, <span class=\"pl-c1\">this</span>.start})\n      <span class=\"pl-k\">:</span> <span class=\"pl-c1\">super</span>(flag, <span class=\"pl-s\">' '</span>, textStyle, onTap<span class=\"pl-k\">:</span> onTap);\n  <span class=\"pl-k\">static</span> <span class=\"pl-k\">const</span> <span class=\"pl-c1\">String</span> flag <span class=\"pl-k\">=</span> <span class=\"pl-s\">'@'</span>;\n  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">int</span> start;\n\n  <span class=\"pl-c\">/// whether show background for @somebody</span>\n<span class=\"pl-c\"></span>  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">bool</span> showAtBackground;\n\n  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">InlineSpan</span> <span class=\"pl-en\">finishText</span>() {\n    <span class=\"pl-k\">final</span> <span class=\"pl-c1\">TextStyle</span> textStyle <span class=\"pl-k\">=</span>\n        <span class=\"pl-c1\">this</span>.textStyle<span class=\"pl-k\">?</span>.<span class=\"pl-en\">copyWith</span>(color<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Colors</span>.blue, fontSize<span class=\"pl-k\">:</span> <span class=\"pl-c1\">16.0</span>);\n\n    <span class=\"pl-k\">final</span> <span class=\"pl-c1\">String</span> atText <span class=\"pl-k\">=</span> <span class=\"pl-en\">toString</span>();\n\n    <span class=\"pl-k\">return</span> showAtBackground\n        <span class=\"pl-k\">?</span> <span class=\"pl-c1\">BackgroundTextSpan</span>(\n            background<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Paint</span>()..color <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Colors</span>.blue.<span class=\"pl-en\">withOpacity</span>(<span class=\"pl-c1\">0.15</span>),\n            text<span class=\"pl-k\">:</span> atText,\n            actualText<span class=\"pl-k\">:</span> atText,\n            start<span class=\"pl-k\">:</span> start,\n\n            <span class=\"pl-c\">///caret can move into special text</span>\n<span class=\"pl-c\"></span>            deleteAll<span class=\"pl-k\">:</span> <span class=\"pl-c1\">true</span>,\n            style<span class=\"pl-k\">:</span> textStyle,\n            recognizer<span class=\"pl-k\">:</span> (<span class=\"pl-c1\">TapGestureRecognizer</span>()\n              ..onTap <span class=\"pl-k\">=</span> () {\n                <span class=\"pl-k\">if</span> (onTap <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {\n                  <span class=\"pl-en\">onTap</span>(atText);\n                }\n              }))\n        <span class=\"pl-k\">:</span> <span class=\"pl-c1\">SpecialTextSpan</span>(\n            text<span class=\"pl-k\">:</span> atText,\n            actualText<span class=\"pl-k\">:</span> atText,\n            start<span class=\"pl-k\">:</span> start,\n            style<span class=\"pl-k\">:</span> textStyle,\n            recognizer<span class=\"pl-k\">:</span> (<span class=\"pl-c1\">TapGestureRecognizer</span>()\n              ..onTap <span class=\"pl-k\">=</span> () {\n                <span class=\"pl-k\">if</span> (onTap <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {\n                  <span class=\"pl-en\">onTap</span>(atText);\n                }\n              }));\n  }\n}</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">SpecialTextSpanBuilder</h3><a id=\"user-content-specialtextspanbuilder\" class=\"anchor\" aria-label=\"Permalink: SpecialTextSpanBuilder\" href=\"#specialtextspanbuilder\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">create your SpecialTextSpanBuilder</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class MySpecialTextSpanBuilder extends SpecialTextSpanBuilder {\n  MySpecialTextSpanBuilder({this.showAtBackground = false});\n\n  /// whether show background for @somebody\n  final bool showAtBackground;\n  @override\n  TextSpan build(String data,\n      {TextStyle textStyle, SpecialTextGestureTapCallback onTap}) {\n    if (kIsWeb) {\n      return TextSpan(text: data, style: textStyle);\n    }\n\n    return super.build(data, textStyle: textStyle, onTap: onTap);\n  }\n\n  @override\n  SpecialText createSpecialText(String flag,\n      {TextStyle textStyle, SpecialTextGestureTapCallback onTap, int index}) {\n    if (flag == null || flag == '') {\n      return null;\n    }\n\n    ///index is end index of start flag, so text start index should be index-(flag.length-1)\n    if (isStart(flag, AtText.flag)) {\n      return AtText(\n        textStyle,\n        onTap,\n        start: index - (AtText.flag.length - 1),\n        showAtBackground: showAtBackground,\n      );\n    } else if (isStart(flag, EmojiText.flag)) {\n      return EmojiText(textStyle, start: index - (EmojiText.flag.length - 1));\n    } else if (isStart(flag, DollarText.flag)) {\n      return DollarText(textStyle, onTap,\n          start: index - (DollarText.flag.length - 1));\n    }\n    return null;\n  }\n}\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-c1\">MySpecialTextSpanBuilder</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">SpecialTextSpanBuilder</span> {\n  <span class=\"pl-c1\">MySpecialTextSpanBuilder</span>({<span class=\"pl-c1\">this</span>.showAtBackground <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>});\n\n  <span class=\"pl-c\">/// whether show background for @somebody</span>\n<span class=\"pl-c\"></span>  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">bool</span> showAtBackground;\n  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">TextSpan</span> <span class=\"pl-en\">build</span>(<span class=\"pl-c1\">String</span> data,\n      {<span class=\"pl-c1\">TextStyle</span> textStyle, <span class=\"pl-c1\">SpecialTextGestureTapCallback</span> onTap}) {\n    <span class=\"pl-k\">if</span> (kIsWeb) {\n      <span class=\"pl-k\">return</span> <span class=\"pl-c1\">TextSpan</span>(text<span class=\"pl-k\">:</span> data, style<span class=\"pl-k\">:</span> textStyle);\n    }\n\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">super</span>.<span class=\"pl-en\">build</span>(data, textStyle<span class=\"pl-k\">:</span> textStyle, onTap<span class=\"pl-k\">:</span> onTap);\n  }\n\n  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">SpecialText</span> <span class=\"pl-en\">createSpecialText</span>(<span class=\"pl-c1\">String</span> flag,\n      {<span class=\"pl-c1\">TextStyle</span> textStyle, <span class=\"pl-c1\">SpecialTextGestureTapCallback</span> onTap, <span class=\"pl-c1\">int</span> index}) {\n    <span class=\"pl-k\">if</span> (flag <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">||</span> flag <span class=\"pl-k\">==</span> <span class=\"pl-s\">''</span>) {\n      <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>;\n    }\n\n    <span class=\"pl-c\">///index is end index of start flag, so text start index should be index-(flag.length-1)</span>\n<span class=\"pl-c\"></span>    <span class=\"pl-k\">if</span> (<span class=\"pl-en\">isStart</span>(flag, <span class=\"pl-c1\">AtText</span>.flag)) {\n      <span class=\"pl-k\">return</span> <span class=\"pl-c1\">AtText</span>(\n        textStyle,\n        onTap,\n        start<span class=\"pl-k\">:</span> index <span class=\"pl-k\">-</span> (<span class=\"pl-c1\">AtText</span>.flag.length <span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>),\n        showAtBackground<span class=\"pl-k\">:</span> showAtBackground,\n      );\n    } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-en\">isStart</span>(flag, <span class=\"pl-c1\">EmojiText</span>.flag)) {\n      <span class=\"pl-k\">return</span> <span class=\"pl-c1\">EmojiText</span>(textStyle, start<span class=\"pl-k\">:</span> index <span class=\"pl-k\">-</span> (<span class=\"pl-c1\">EmojiText</span>.flag.length <span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>));\n    } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-en\">isStart</span>(flag, <span class=\"pl-c1\">DollarText</span>.flag)) {\n      <span class=\"pl-k\">return</span> <span class=\"pl-c1\">DollarText</span>(textStyle, onTap,\n          start<span class=\"pl-k\">:</span> index <span class=\"pl-k\">-</span> (<span class=\"pl-c1\">DollarText</span>.flag.length <span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>));\n    }\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>;\n  }\n}</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Image</h2><a id=\"user-content-image\" class=\"anchor\" aria-label=\"Permalink: Image\" href=\"#image\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/custom_image.gif\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/custom_image.gif\" alt=\"\" data-animated-image=\"\" style=\"max-width: 100%;\"></a></p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">ImageSpan</h3><a id=\"user-content-imagespan\" class=\"anchor\" aria-label=\"Permalink: ImageSpan\" href=\"#imagespan\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">show inline image by using ImageSpan.</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class ImageSpan extends ExtendedWidgetSpan {\n  ImageSpan(\n    ImageProvider image, {\n    Key key,\n    @required double imageWidth,\n    @required double imageHeight,\n    EdgeInsets margin,\n    int start = 0,\n    ui.PlaceholderAlignment alignment = ui.PlaceholderAlignment.bottom,\n    String actualText,\n    TextBaseline baseline,\n    BoxFit fit= BoxFit.scaleDown,\n    ImageLoadingBuilder loadingBuilder,\n    ImageFrameBuilder frameBuilder,\n    String semanticLabel,\n    bool excludeFromSemantics = false,\n    Color color,\n    BlendMode colorBlendMode,\n    AlignmentGeometry imageAlignment = Alignment.center,\n    ImageRepeat repeat = ImageRepeat.noRepeat,\n    Rect centerSlice,\n    bool matchTextDirection = false,\n    bool gaplessPlayback = false,\n    FilterQuality filterQuality = FilterQuality.low,\n    GestureTapCallback onTap,\n    HitTestBehavior behavior = HitTestBehavior.deferToChild,\n  })\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-c1\">ImageSpan</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">ExtendedWidgetSpan</span> {\n  <span class=\"pl-c1\">ImageSpan</span>(\n    <span class=\"pl-c1\">ImageProvider</span> image, {\n    <span class=\"pl-c1\">Key</span> key,\n    <span class=\"pl-k\">@required</span> <span class=\"pl-c1\">double</span> imageWidth,\n    <span class=\"pl-k\">@required</span> <span class=\"pl-c1\">double</span> imageHeight,\n    <span class=\"pl-c1\">EdgeInsets</span> margin,\n    <span class=\"pl-c1\">int</span> start <span class=\"pl-k\">=</span> <span class=\"pl-c1\">0</span>,\n    ui.<span class=\"pl-c1\">PlaceholderAlignment</span> alignment <span class=\"pl-k\">=</span> ui.<span class=\"pl-c1\">PlaceholderAlignment</span>.bottom,\n    <span class=\"pl-c1\">String</span> actualText,\n    <span class=\"pl-c1\">TextBaseline</span> baseline,\n    <span class=\"pl-c1\">BoxFit</span> fit<span class=\"pl-k\">=</span> <span class=\"pl-c1\">BoxFit</span>.scaleDown,\n    <span class=\"pl-c1\">ImageLoadingBuilder</span> loadingBuilder,\n    <span class=\"pl-c1\">ImageFrameBuilder</span> frameBuilder,\n    <span class=\"pl-c1\">String</span> semanticLabel,\n    <span class=\"pl-c1\">bool</span> excludeFromSemantics <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>,\n    <span class=\"pl-c1\">Color</span> color,\n    <span class=\"pl-c1\">BlendMode</span> colorBlendMode,\n    <span class=\"pl-c1\">AlignmentGeometry</span> imageAlignment <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Alignment</span>.center,\n    <span class=\"pl-c1\">ImageRepeat</span> repeat <span class=\"pl-k\">=</span> <span class=\"pl-c1\">ImageRepeat</span>.noRepeat,\n    <span class=\"pl-c1\">Rect</span> centerSlice,\n    <span class=\"pl-c1\">bool</span> matchTextDirection <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>,\n    <span class=\"pl-c1\">bool</span> gaplessPlayback <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>,\n    <span class=\"pl-c1\">FilterQuality</span> filterQuality <span class=\"pl-k\">=</span> <span class=\"pl-c1\">FilterQuality</span>.low,\n    <span class=\"pl-c1\">GestureTapCallback</span> onTap,\n    <span class=\"pl-c1\">HitTestBehavior</span> behavior <span class=\"pl-k\">=</span> <span class=\"pl-c1\">HitTestBehavior</span>.deferToChild,\n  })</pre></div>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>parameter</th>\n<th>description</th>\n<th>default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>image</td>\n<td>The image to display(ImageProvider).</td>\n<td>-</td>\n</tr>\n<tr>\n<td>imageWidth</td>\n<td>The width of image(not include margin)</td>\n<td>required</td>\n</tr>\n<tr>\n<td>imageHeight</td>\n<td>The height of image(not include margin)</td>\n<td>required</td>\n</tr>\n<tr>\n<td>margin</td>\n<td>The margin of image</td>\n<td>-</td>\n</tr>\n<tr>\n<td>actualText</td>\n<td>Actual text, take care of it when enable selection,something likes \"[love]\"</td>\n<td>'\\uFFFC'</td>\n</tr>\n<tr>\n<td>start</td>\n<td>Start index of text,take care of it when enable selection.</td>\n<td>0</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Selection</h2><a id=\"user-content-selection\" class=\"anchor\" aria-label=\"Permalink: Selection\" href=\"#selection\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/selection.gif\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/selection.gif\" alt=\"\" data-animated-image=\"\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">It works with <code>SelectionArea</code> now.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">TextSelectionControls</h3><a id=\"user-content-textselectioncontrols\" class=\"anchor\" aria-label=\"Permalink: TextSelectionControls\" href=\"#textselectioncontrols\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">override [SelectionArea.contextMenuBuilder] and [TextSelectionControls] to custom your toolbar widget or handle widget</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const double _kHandleSize = 22.0;\n\n/// Android Material styled text selection controls.\n\nclass MyTextSelectionControls extends TextSelectionControls\n    with TextSelectionHandleControls {\n  MyTextSelectionControls({this.joinZeroWidthSpace = false});\n  final bool joinZeroWidthSpace;\n\n  /// Returns the size of the Material handle.\n  @override\n  Size getHandleSize(double textLineHeight) =&gt;\n      const Size(_kHandleSize, _kHandleSize);\n\n  /// Builder for material-style text selection handles.\n  @override\n  Widget buildHandle(\n      BuildContext context, TextSelectionHandleType type, double textLineHeight,\n      [VoidCallback? onTap, double? startGlyphHeight, double? endGlyphHeight]) {\n    final Widget handle = SizedBox(\n      width: _kHandleSize,\n      height: _kHandleSize,\n      child: Image.asset(\n        'assets/40.png',\n      ),\n    );\n\n    // [handle] is a circle, with a rectangle in the top left quadrant of that\n    // circle (an onion pointing to 10:30). We rotate [handle] to point\n    // straight up or up-right depending on the handle type.\n    switch (type) {\n      case TextSelectionHandleType.left: // points up-right\n        return Transform.rotate(\n          angle: math.pi / 4.0,\n          child: handle,\n        );\n      case TextSelectionHandleType.right: // points up-left\n        return Transform.rotate(\n          angle: -math.pi / 4.0,\n          child: handle,\n        );\n      case TextSelectionHandleType.collapsed: // points up\n        return handle;\n    }\n  }\n\n  /// Gets anchor for material-style text selection handles.\n  ///\n  /// See [TextSelectionControls.getHandleAnchor].\n  @override\n  Offset getHandleAnchor(TextSelectionHandleType type, double textLineHeight,\n      [double? startGlyphHeight, double? endGlyphHeight]) {\n    switch (type) {\n      case TextSelectionHandleType.left:\n        return const Offset(_kHandleSize, 0);\n      case TextSelectionHandleType.right:\n        return Offset.zero;\n      default:\n        return const Offset(_kHandleSize / 2, -4);\n    }\n  }\n}\n\nclass CommonSelectionArea extends StatelessWidget {\n  const CommonSelectionArea({\n    super.key,\n    required this.child,\n    this.joinZeroWidthSpace = false,\n  });\n  final Widget child;\n  final bool joinZeroWidthSpace;\n\n  @override\n  Widget build(BuildContext context) {\n    SelectedContent? _selectedContent;\n    return SelectionArea(\n      contextMenuBuilder:\n          (BuildContext context, SelectableRegionState selectableRegionState) {\n        return AdaptiveTextSelectionToolbar.buttonItems(\n          buttonItems: &lt;ContextMenuButtonItem&gt;[\n            ContextMenuButtonItem(\n              onPressed: () {\n                // TODO(zmtzawqlp):  how to get Selectable\n                // and  _clearSelection is not public\n                // https://github.com/flutter/flutter/issues/126980\n\n                //  onCopy: () {\n                //   _copy();\n\n                //   // In Android copy should clear the selection.\n                //   switch (defaultTargetPlatform) {\n                //     case TargetPlatform.android:\n                //     case TargetPlatform.fuchsia:\n                //       _clearSelection();\n                //     case TargetPlatform.iOS:\n                //       hideToolbar(false);\n                //     case TargetPlatform.linux:\n                //     case TargetPlatform.macOS:\n                //     case TargetPlatform.windows:\n                //       hideToolbar();\n                //   }\n                // },\n\n                // if (_selectedContent != null) {\n                //   String content = _selectedContent!.plainText;\n                //   if (joinZeroWidthSpace) {\n                //     content = content.replaceAll(zeroWidthSpace, '');\n                //   }\n\n                //   Clipboard.setData(ClipboardData(text: content));\n                //   selectableRegionState.hideToolbar(true);\n                //   selectableRegionState._clearSelection();\n                // }\n\n                selectableRegionState\n                    .copySelection(SelectionChangedCause.toolbar);\n\n                // remove zeroWidthSpace\n                if (joinZeroWidthSpace) {\n                  Clipboard.getData('text/plain').then((ClipboardData? value) {\n                    if (value != null) {\n                      // remove zeroWidthSpace\n                      final String? plainText =\n                          value.text?.replaceAll(ExtendedTextLibraryUtils.zeroWidthSpace, '');\n                      if (plainText != null) {\n                        Clipboard.setData(ClipboardData(text: plainText));\n                      }\n                    }\n                  });\n                }\n              },\n              type: ContextMenuButtonType.copy,\n            ),\n            ContextMenuButtonItem(\n              onPressed: () {\n                selectableRegionState.selectAll(SelectionChangedCause.toolbar);\n              },\n              type: ContextMenuButtonType.selectAll,\n            ),\n            ContextMenuButtonItem(\n              onPressed: () {\n                launchUrl(Uri.parse(\n                    'mailto:xxx@live.com?subject=extended_text_share&amp;body=${_selectedContent?.plainText}'));\n                selectableRegionState.hideToolbar();\n              },\n              type: ContextMenuButtonType.custom,\n              label: 'like',\n            ),\n          ],\n          anchors: selectableRegionState.contextMenuAnchors,\n        );\n        // return AdaptiveTextSelectionToolbar.selectableRegion(\n        //   selectableRegionState: selectableRegionState,\n        // );\n      },\n      // magnifierConfiguration: TextMagnifierConfiguration(\n      //   magnifierBuilder: (\n      //     BuildContext context,\n      //     MagnifierController controller,\n      //     ValueNotifier&lt;MagnifierInfo&gt; magnifierInfo,\n      //   ) {\n      //     return TextMagnifier(\n      //       magnifierInfo: magnifierInfo,\n      //     );\n      //     // switch (defaultTargetPlatform) {\n      //     //   case TargetPlatform.iOS:\n      //     //     return CupertinoTextMagnifier(\n      //     //       controller: controller,\n      //     //       magnifierInfo: magnifierInfo,\n      //     //     );\n      //     //   case TargetPlatform.android:\n      //     //     return TextMagnifier(\n      //     //       magnifierInfo: magnifierInfo,\n      //     //     );\n      //     //   case TargetPlatform.fuchsia:\n      //     //   case TargetPlatform.linux:\n      //     //   case TargetPlatform.macOS:\n      //     //   case TargetPlatform.windows:\n      //     //     return null;\n      //     // }\n      //   },\n      // ),\n      // selectionControls: MyTextSelectionControls(),\n      onSelectionChanged: (SelectedContent? value) {\n        print(value?.plainText);\n        _selectedContent = value;\n      },\n      child: child,\n    );\n  }\n}\n\"><pre><span class=\"pl-k\">const</span> <span class=\"pl-c1\">double</span> _kHandleSize <span class=\"pl-k\">=</span> <span class=\"pl-c1\">22.0</span>;\n\n<span class=\"pl-c\">/// Android Material styled text selection controls.</span>\n<span class=\"pl-c\"></span>\n<span class=\"pl-k\">class</span> <span class=\"pl-c1\">MyTextSelectionControls</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">TextSelectionControls</span>\n    <span class=\"pl-k\">with</span> <span class=\"pl-c1\">TextSelectionHandleControls</span> {\n  <span class=\"pl-c1\">MyTextSelectionControls</span>({<span class=\"pl-c1\">this</span>.joinZeroWidthSpace <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>});\n  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">bool</span> joinZeroWidthSpace;\n\n  <span class=\"pl-c\">/// Returns the size of the Material handle.</span>\n<span class=\"pl-c\"></span>  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">Size</span> <span class=\"pl-en\">getHandleSize</span>(<span class=\"pl-c1\">double</span> textLineHeight) <span class=\"pl-k\">=&gt;</span>\n      <span class=\"pl-k\">const</span> <span class=\"pl-c1\">Size</span>(_kHandleSize, _kHandleSize);\n\n  <span class=\"pl-c\">/// Builder for material-style text selection handles.</span>\n<span class=\"pl-c\"></span>  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">Widget</span> <span class=\"pl-en\">buildHandle</span>(\n      <span class=\"pl-c1\">BuildContext</span> context, <span class=\"pl-c1\">TextSelectionHandleType</span> type, <span class=\"pl-c1\">double</span> textLineHeight,\n      [<span class=\"pl-c1\">VoidCallback</span><span class=\"pl-k\">?</span> onTap, <span class=\"pl-c1\">double</span><span class=\"pl-k\">?</span> startGlyphHeight, <span class=\"pl-c1\">double</span><span class=\"pl-k\">?</span> endGlyphHeight]) {\n    <span class=\"pl-k\">final</span> <span class=\"pl-c1\">Widget</span> handle <span class=\"pl-k\">=</span> <span class=\"pl-c1\">SizedBox</span>(\n      width<span class=\"pl-k\">:</span> _kHandleSize,\n      height<span class=\"pl-k\">:</span> _kHandleSize,\n      child<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Image</span>.<span class=\"pl-en\">asset</span>(\n        <span class=\"pl-s\">'assets/40.png'</span>,\n      ),\n    );\n\n    <span class=\"pl-c\">// [handle] is a circle, with a rectangle in the top left quadrant of that</span>\n    <span class=\"pl-c\">// circle (an onion pointing to 10:30). We rotate [handle] to point</span>\n    <span class=\"pl-c\">// straight up or up-right depending on the handle type.</span>\n    <span class=\"pl-k\">switch</span> (type) {\n      <span class=\"pl-k\">case</span> <span class=\"pl-c1\">TextSelectionHandleType</span>.left<span class=\"pl-k\">:</span> <span class=\"pl-c\">// points up-right</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">Transform</span>.<span class=\"pl-en\">rotate</span>(\n          angle<span class=\"pl-k\">:</span> math.pi <span class=\"pl-k\">/</span> <span class=\"pl-c1\">4.0</span>,\n          child<span class=\"pl-k\">:</span> handle,\n        );\n      <span class=\"pl-k\">case</span> <span class=\"pl-c1\">TextSelectionHandleType</span>.right<span class=\"pl-k\">:</span> <span class=\"pl-c\">// points up-left</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">Transform</span>.<span class=\"pl-en\">rotate</span>(\n          angle<span class=\"pl-k\">:</span> <span class=\"pl-k\">-</span>math.pi <span class=\"pl-k\">/</span> <span class=\"pl-c1\">4.0</span>,\n          child<span class=\"pl-k\">:</span> handle,\n        );\n      <span class=\"pl-k\">case</span> <span class=\"pl-c1\">TextSelectionHandleType</span>.collapsed<span class=\"pl-k\">:</span> <span class=\"pl-c\">// points up</span>\n        <span class=\"pl-k\">return</span> handle;\n    }\n  }\n\n  <span class=\"pl-c\">/// Gets anchor for material-style text selection handles.</span>\n<span class=\"pl-c\">  ///</span>\n<span class=\"pl-c\">  /// See <span class=\"pl-v\">[TextSelectionControls.getHandleAnchor]</span>.</span>\n<span class=\"pl-c\"></span>  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">Offset</span> <span class=\"pl-en\">getHandleAnchor</span>(<span class=\"pl-c1\">TextSelectionHandleType</span> type, <span class=\"pl-c1\">double</span> textLineHeight,\n      [<span class=\"pl-c1\">double</span><span class=\"pl-k\">?</span> startGlyphHeight, <span class=\"pl-c1\">double</span><span class=\"pl-k\">?</span> endGlyphHeight]) {\n    <span class=\"pl-k\">switch</span> (type) {\n      <span class=\"pl-k\">case</span> <span class=\"pl-c1\">TextSelectionHandleType</span>.left<span class=\"pl-k\">:</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-k\">const</span> <span class=\"pl-c1\">Offset</span>(_kHandleSize, <span class=\"pl-c1\">0</span>);\n      <span class=\"pl-k\">case</span> <span class=\"pl-c1\">TextSelectionHandleType</span>.right<span class=\"pl-k\">:</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">Offset</span>.zero;\n      <span class=\"pl-k\">default</span><span class=\"pl-k\">:</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-k\">const</span> <span class=\"pl-c1\">Offset</span>(_kHandleSize <span class=\"pl-k\">/</span> <span class=\"pl-c1\">2</span>, <span class=\"pl-k\">-</span><span class=\"pl-c1\">4</span>);\n    }\n  }\n}\n\n<span class=\"pl-k\">class</span> <span class=\"pl-c1\">CommonSelectionArea</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">StatelessWidget</span> {\n  <span class=\"pl-k\">const</span> <span class=\"pl-c1\">CommonSelectionArea</span>({\n    <span class=\"pl-c1\">super</span>.key,\n    <span class=\"pl-k\">required</span> <span class=\"pl-c1\">this</span>.child,\n    <span class=\"pl-c1\">this</span>.joinZeroWidthSpace <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>,\n  });\n  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">Widget</span> child;\n  <span class=\"pl-k\">final</span> <span class=\"pl-c1\">bool</span> joinZeroWidthSpace;\n\n  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-c1\">Widget</span> <span class=\"pl-en\">build</span>(<span class=\"pl-c1\">BuildContext</span> context) {\n    <span class=\"pl-c1\">SelectedContent</span><span class=\"pl-k\">?</span> _selectedContent;\n    <span class=\"pl-k\">return</span> <span class=\"pl-c1\">SelectionArea</span>(\n      contextMenuBuilder<span class=\"pl-k\">:</span>\n          (<span class=\"pl-c1\">BuildContext</span> context, <span class=\"pl-c1\">SelectableRegionState</span> selectableRegionState) {\n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">AdaptiveTextSelectionToolbar</span>.<span class=\"pl-en\">buttonItems</span>(\n          buttonItems<span class=\"pl-k\">:</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-c1\">ContextMenuButtonItem</span><span class=\"pl-k\">&gt;</span>[\n            <span class=\"pl-c1\">ContextMenuButtonItem</span>(\n              onPressed<span class=\"pl-k\">:</span> () {\n                <span class=\"pl-c\">// TODO(zmtzawqlp):  how to get Selectable</span>\n                <span class=\"pl-c\">// and  _clearSelection is not public</span>\n                <span class=\"pl-c\">// https://github.com/flutter/flutter/issues/126980</span>\n\n                <span class=\"pl-c\">//  onCopy: () {</span>\n                <span class=\"pl-c\">//   _copy();</span>\n\n                <span class=\"pl-c\">//   // In Android copy should clear the selection.</span>\n                <span class=\"pl-c\">//   switch (defaultTargetPlatform) {</span>\n                <span class=\"pl-c\">//     case TargetPlatform.android:</span>\n                <span class=\"pl-c\">//     case TargetPlatform.fuchsia:</span>\n                <span class=\"pl-c\">//       _clearSelection();</span>\n                <span class=\"pl-c\">//     case TargetPlatform.iOS:</span>\n                <span class=\"pl-c\">//       hideToolbar(false);</span>\n                <span class=\"pl-c\">//     case TargetPlatform.linux:</span>\n                <span class=\"pl-c\">//     case TargetPlatform.macOS:</span>\n                <span class=\"pl-c\">//     case TargetPlatform.windows:</span>\n                <span class=\"pl-c\">//       hideToolbar();</span>\n                <span class=\"pl-c\">//   }</span>\n                <span class=\"pl-c\">// },</span>\n\n                <span class=\"pl-c\">// if (_selectedContent != null) {</span>\n                <span class=\"pl-c\">//   String content = _selectedContent!.plainText;</span>\n                <span class=\"pl-c\">//   if (joinZeroWidthSpace) {</span>\n                <span class=\"pl-c\">//     content = content.replaceAll(zeroWidthSpace, '');</span>\n                <span class=\"pl-c\">//   }</span>\n\n                <span class=\"pl-c\">//   Clipboard.setData(ClipboardData(text: content));</span>\n                <span class=\"pl-c\">//   selectableRegionState.hideToolbar(true);</span>\n                <span class=\"pl-c\">//   selectableRegionState._clearSelection();</span>\n                <span class=\"pl-c\">// }</span>\n\n                selectableRegionState\n                    .<span class=\"pl-en\">copySelection</span>(<span class=\"pl-c1\">SelectionChangedCause</span>.toolbar);\n\n                <span class=\"pl-c\">// remove zeroWidthSpace</span>\n                <span class=\"pl-k\">if</span> (joinZeroWidthSpace) {\n                  <span class=\"pl-c1\">Clipboard</span>.<span class=\"pl-en\">getData</span>(<span class=\"pl-s\">'text/plain'</span>).<span class=\"pl-en\">then</span>((<span class=\"pl-c1\">ClipboardData</span><span class=\"pl-k\">?</span> value) {\n                    <span class=\"pl-k\">if</span> (value <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {\n                      <span class=\"pl-c\">// remove zeroWidthSpace</span>\n                      <span class=\"pl-k\">final</span> <span class=\"pl-c1\">String</span><span class=\"pl-k\">?</span> plainText <span class=\"pl-k\">=</span>\n                          value.text<span class=\"pl-k\">?</span>.<span class=\"pl-en\">replaceAll</span>(<span class=\"pl-c1\">ExtendedTextLibraryUtils</span>.zeroWidthSpace, <span class=\"pl-s\">''</span>);\n                      <span class=\"pl-k\">if</span> (plainText <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {\n                        <span class=\"pl-c1\">Clipboard</span>.<span class=\"pl-en\">setData</span>(<span class=\"pl-c1\">ClipboardData</span>(text<span class=\"pl-k\">:</span> plainText));\n                      }\n                    }\n                  });\n                }\n              },\n              type<span class=\"pl-k\">:</span> <span class=\"pl-c1\">ContextMenuButtonType</span>.copy,\n            ),\n            <span class=\"pl-c1\">ContextMenuButtonItem</span>(\n              onPressed<span class=\"pl-k\">:</span> () {\n                selectableRegionState.<span class=\"pl-en\">selectAll</span>(<span class=\"pl-c1\">SelectionChangedCause</span>.toolbar);\n              },\n              type<span class=\"pl-k\">:</span> <span class=\"pl-c1\">ContextMenuButtonType</span>.selectAll,\n            ),\n            <span class=\"pl-c1\">ContextMenuButtonItem</span>(\n              onPressed<span class=\"pl-k\">:</span> () {\n                <span class=\"pl-en\">launchUrl</span>(<span class=\"pl-c1\">Uri</span>.<span class=\"pl-en\">parse</span>(\n                    <span class=\"pl-s\">'mailto:xxx@live.com?subject=extended_text_share&amp;body=${<span class=\"pl-v\">_selectedContent</span>?.<span class=\"pl-v\">plainText</span>}'</span>));\n                selectableRegionState.<span class=\"pl-en\">hideToolbar</span>();\n              },\n              type<span class=\"pl-k\">:</span> <span class=\"pl-c1\">ContextMenuButtonType</span>.custom,\n              label<span class=\"pl-k\">:</span> <span class=\"pl-s\">'like'</span>,\n            ),\n          ],\n          anchors<span class=\"pl-k\">:</span> selectableRegionState.contextMenuAnchors,\n        );\n        <span class=\"pl-c\">// return AdaptiveTextSelectionToolbar.selectableRegion(</span>\n        <span class=\"pl-c\">//   selectableRegionState: selectableRegionState,</span>\n        <span class=\"pl-c\">// );</span>\n      },\n      <span class=\"pl-c\">// magnifierConfiguration: TextMagnifierConfiguration(</span>\n      <span class=\"pl-c\">//   magnifierBuilder: (</span>\n      <span class=\"pl-c\">//     BuildContext context,</span>\n      <span class=\"pl-c\">//     MagnifierController controller,</span>\n      <span class=\"pl-c\">//     ValueNotifier&lt;MagnifierInfo&gt; magnifierInfo,</span>\n      <span class=\"pl-c\">//   ) {</span>\n      <span class=\"pl-c\">//     return TextMagnifier(</span>\n      <span class=\"pl-c\">//       magnifierInfo: magnifierInfo,</span>\n      <span class=\"pl-c\">//     );</span>\n      <span class=\"pl-c\">//     // switch (defaultTargetPlatform) {</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.iOS:</span>\n      <span class=\"pl-c\">//     //     return CupertinoTextMagnifier(</span>\n      <span class=\"pl-c\">//     //       controller: controller,</span>\n      <span class=\"pl-c\">//     //       magnifierInfo: magnifierInfo,</span>\n      <span class=\"pl-c\">//     //     );</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.android:</span>\n      <span class=\"pl-c\">//     //     return TextMagnifier(</span>\n      <span class=\"pl-c\">//     //       magnifierInfo: magnifierInfo,</span>\n      <span class=\"pl-c\">//     //     );</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.fuchsia:</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.linux:</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.macOS:</span>\n      <span class=\"pl-c\">//     //   case TargetPlatform.windows:</span>\n      <span class=\"pl-c\">//     //     return null;</span>\n      <span class=\"pl-c\">//     // }</span>\n      <span class=\"pl-c\">//   },</span>\n      <span class=\"pl-c\">// ),</span>\n      <span class=\"pl-c\">// selectionControls: MyTextSelectionControls(),</span>\n      onSelectionChanged<span class=\"pl-k\">:</span> (<span class=\"pl-c1\">SelectedContent</span><span class=\"pl-k\">?</span> value) {\n        <span class=\"pl-en\">print</span>(value<span class=\"pl-k\">?</span>.plainText);\n        _selectedContent <span class=\"pl-k\">=</span> value;\n      },\n      child<span class=\"pl-k\">:</span> child,\n    );\n  }\n}\n</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Custom Background</h2><a id=\"user-content-custom-background\" class=\"anchor\" aria-label=\"Permalink: Custom Background\" href=\"#custom-background\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/background.png\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/background.png\" alt=\"\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">refer to issues <a href=\"https://github.com/flutter/flutter/issues/24335\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/24335/hovercard\">24335</a>/<a href=\"https://github.com/flutter/flutter/issues/24337\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/24337/hovercard\">24337</a> about background</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  BackgroundTextSpan(\n      text:\n          &quot;This text has nice background with borderradius,no mattter how many line,it likes nice&quot;,\n      background: Paint()..color = Colors.indigo,\n      clipBorderRadius: BorderRadius.all(Radius.circular(3.0))),\"><pre>  <span class=\"pl-c1\">BackgroundTextSpan</span>(\n      text<span class=\"pl-k\">:</span>\n          <span class=\"pl-s\">\"This text has nice background with borderradius,no mattter how many line,it likes nice\"</span>,\n      background<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Paint</span>()..color <span class=\"pl-k\">=</span> <span class=\"pl-c1\">Colors</span>.indigo,\n      clipBorderRadius<span class=\"pl-k\">:</span> <span class=\"pl-c1\">BorderRadius</span>.<span class=\"pl-en\">all</span>(<span class=\"pl-c1\">Radius</span>.<span class=\"pl-en\">circular</span>(<span class=\"pl-c1\">3.0</span>))),</pre></div>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>parameter</th>\n<th>description</th>\n<th>default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>background</td>\n<td>Background painter</td>\n<td>-</td>\n</tr>\n<tr>\n<td>clipBorderRadius</td>\n<td>Clip BorderRadius</td>\n<td>-</td>\n</tr>\n<tr>\n<td>paintBackground</td>\n<td>Paint background call back, you can paint background by self</td>\n<td>-</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Custom Overflow</h2><a id=\"user-content-custom-overflow\" class=\"anchor\" aria-label=\"Permalink: Custom Overflow\" href=\"#custom-overflow\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/overflow.jpg\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/overflow.jpg\" alt=\"\" style=\"max-width: 100%;\"></a></th>\n<th><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/HarmonyCandies/HarmonyCandies/blob/main/gif/extended_text/textOverflowPosition_auto.png\"><img src=\"https://github.com/HarmonyCandies/HarmonyCandies/raw/main/gif/extended_text/textOverflowPosition_auto.png\" alt=\"\" style=\"max-width: 100%;\"></a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<p dir=\"auto\">refer to issue <a href=\"https://github.com/flutter/flutter/issues/26748\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/26748/hovercard\">26748</a></p>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>parameter</th>\n<th>description</th>\n<th>default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>child</td>\n<td>The widget of TextOverflow.</td>\n<td>@required</td>\n</tr>\n<tr>\n<td>maxHeight</td>\n<td>The maxHeight of [TextOverflowWidget], default is preferredLineHeight.</td>\n<td>preferredLineHeight</td>\n</tr>\n<tr>\n<td>align</td>\n<td>The Align of [TextOverflowWidget], left/right.</td>\n<td>right</td>\n</tr>\n<tr>\n<td>position</td>\n<td>The position which TextOverflowWidget should be shown.</td>\n<td>TextOverflowPosition.end</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  ExtendedText(\n   overflowWidget: TextOverflowWidget(\n     position: TextOverflowPosition.end,\n     align: TextOverflowAlign.center,\n     // just for debug\n     debugOverflowRectColor: Colors.red.withOpacity(0.1),\n     child: Container(\n       child: Row(\n         mainAxisSize: MainAxisSize.min,\n         children: &lt;Widget&gt;[\n           const Text('\\u2026 '),\n           InkWell(\n             child: const Text(\n               'more',\n             ),\n             onTap: () {\n               launch(\n                   'https://github.com/fluttercandies/extended_text');\n             },\n           )\n         ],\n       ),\n     ),\n   ),\n  )\"><pre>  <span class=\"pl-c1\">ExtendedText</span>(\n   overflowWidget<span class=\"pl-k\">:</span> <span class=\"pl-c1\">TextOverflowWidget</span>(\n     position<span class=\"pl-k\">:</span> <span class=\"pl-c1\">TextOverflowPosition</span>.end,\n     align<span class=\"pl-k\">:</span> <span class=\"pl-c1\">TextOverflowAlign</span>.center,\n     <span class=\"pl-c\">// just for debug</span>\n     debugOverflowRectColor<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Colors</span>.red.<span class=\"pl-en\">withOpacity</span>(<span class=\"pl-c1\">0.1</span>),\n     child<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Container</span>(\n       child<span class=\"pl-k\">:</span> <span class=\"pl-c1\">Row</span>(\n         mainAxisSize<span class=\"pl-k\">:</span> <span class=\"pl-c1\">MainAxisSize</span>.min,\n         children<span class=\"pl-k\">:</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-c1\">Widget</span><span class=\"pl-k\">&gt;</span>[\n           <span class=\"pl-k\">const</span> <span class=\"pl-c1\">Text</span>(<span class=\"pl-s\">'<span class=\"pl-cce\">\\u</span>2026 '</span>),\n           <span class=\"pl-c1\">InkWell</span>(\n             child<span class=\"pl-k\">:</span> <span class=\"pl-k\">const</span> <span class=\"pl-c1\">Text</span>(\n               <span class=\"pl-s\">'more'</span>,\n             ),\n             onTap<span class=\"pl-k\">:</span> () {\n               <span class=\"pl-en\">launch</span>(\n                   <span class=\"pl-s\">'https://github.com/fluttercandies/extended_text'</span>);\n             },\n           )\n         ],\n       ),\n     ),\n   ),\n  )</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Join Zero-Width Space</h2><a id=\"user-content-join-zero-width-space\" class=\"anchor\" aria-label=\"Permalink: Join Zero-Width Space\" href=\"#join-zero-width-space\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/fluttercandies/Flutter_Candies/blob/master/gif/extended_text/JoinZeroWidthSpace.jpg\"><img src=\"https://github.com/fluttercandies/Flutter_Candies/raw/master/gif/extended_text/JoinZeroWidthSpace.jpg\" alt=\"\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">refer to issue <a href=\"https://github.com/flutter/flutter/issues/18761\" data-hovercard-type=\"issue\" data-hovercard-url=\"/flutter/flutter/issues/18761/hovercard\">18761</a></p>\n<p dir=\"auto\">if [ExtendedText.joinZeroWidthSpace] is true, it will join '\\u{200B}' into text, make line breaking and overflow style better.</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  ExtendedText(\n      joinZeroWidthSpace: true,\n    )\"><pre>  <span class=\"pl-c1\">ExtendedText</span>(\n      joinZeroWidthSpace<span class=\"pl-k\">:</span> <span class=\"pl-c1\">true</span>,\n    )</pre></div>\n<p dir=\"auto\">or you can convert by following method:</p>\n<ol dir=\"auto\">\n<li>String</li>\n</ol>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  String input='abc'.joinChar();\"><pre>  <span class=\"pl-c1\">String</span> input<span class=\"pl-k\">=</span><span class=\"pl-s\">'abc'</span>.<span class=\"pl-en\">joinChar</span>();</pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>InlineSpan</li>\n</ol>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"     InlineSpan innerTextSpan;\n     innerTextSpan = joinChar(\n        innerTextSpan,\n        Accumulator(),\n        zeroWidthSpace,\n    );\"><pre>     <span class=\"pl-c1\">InlineSpan</span> innerTextSpan;\n     innerTextSpan <span class=\"pl-k\">=</span> <span class=\"pl-en\">joinChar</span>(\n        innerTextSpan,\n        <span class=\"pl-c1\">Accumulator</span>(),\n        zeroWidthSpace,\n    );</pre></div>\n<p dir=\"auto\">Take care of following things:</p>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\">the word is not a word, it will not working when you want to double tap to select a word.</p>\n</li>\n<li>\n<p dir=\"auto\">text is changed, you should override TextSelectionControls and remove zeroWidthSpace.</p>\n</li>\n</ol>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"\nclass MyTextSelectionControls extends TextSelectionControls {\n\n  @override\n  void handleCopy(TextSelectionDelegate delegate,\n      ClipboardStatusNotifier? clipboardStatus) {\n    final TextEditingValue value = delegate.textEditingValue;\n\n    String data = value.selection.textInside(value.text);\n    // remove zeroWidthSpace\n    data = data.replaceAll(zeroWidthSpace, '');\n\n    Clipboard.setData(ClipboardData(\n      text: value.selection.textInside(value.text),\n    ));\n    clipboardStatus?.update();\n    delegate.textEditingValue = TextEditingValue(\n      text: value.text,\n      selection: TextSelection.collapsed(offset: value.selection.end),\n    );\n    delegate.bringIntoView(delegate.textEditingValue.selection.extent);\n    delegate.hideToolbar();\n  }\n}\n\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-c1\">MyTextSelectionControls</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">TextSelectionControls</span> {\n\n  <span class=\"pl-k\">@override</span>\n  <span class=\"pl-k\">void</span> <span class=\"pl-en\">handleCopy</span>(<span class=\"pl-c1\">TextSelectionDelegate</span> delegate,\n      <span class=\"pl-c1\">ClipboardStatusNotifier</span><span class=\"pl-k\">?</span> clipboardStatus) {\n    <span class=\"pl-k\">final</span> <span class=\"pl-c1\">TextEditingValue</span> value <span class=\"pl-k\">=</span> delegate.textEditingValue;\n\n    <span class=\"pl-c1\">String</span> data <span class=\"pl-k\">=</span> value.selection.<span class=\"pl-en\">textInside</span>(value.text);\n    <span class=\"pl-c\">// remove zeroWidthSpace</span>\n    data <span class=\"pl-k\">=</span> data.<span class=\"pl-en\">replaceAll</span>(zeroWidthSpace, <span class=\"pl-s\">''</span>);\n\n    <span class=\"pl-c1\">Clipboard</span>.<span class=\"pl-en\">setData</span>(<span class=\"pl-c1\">ClipboardData</span>(\n      text<span class=\"pl-k\">:</span> value.selection.<span class=\"pl-en\">textInside</span>(value.text),\n    ));\n    clipboardStatus<span class=\"pl-k\">?</span>.<span class=\"pl-en\">update</span>();\n    delegate.textEditingValue <span class=\"pl-k\">=</span> <span class=\"pl-c1\">TextEditingValue</span>(\n      text<span class=\"pl-k\">:</span> value.text,\n      selection<span class=\"pl-k\">:</span> <span class=\"pl-c1\">TextSelection</span>.<span class=\"pl-en\">collapsed</span>(offset<span class=\"pl-k\">:</span> value.selection.end),\n    );\n    delegate.<span class=\"pl-en\">bringIntoView</span>(delegate.textEditingValue.selection.extent);\n    delegate.<span class=\"pl-en\">hideToolbar</span>();\n  }\n}\n</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Gradient</h2><a id=\"user-content-gradient\" class=\"anchor\" aria-label=\"Permalink: Gradient\" href=\"#gradient\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">GradientConfig</h3><a id=\"user-content-gradientconfig\" class=\"anchor\" aria-label=\"Permalink: GradientConfig\" href=\"#gradientconfig\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Configuration for applying gradients to text.</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">[gradient] is the gradient that will be applied to the text.</p>\n</li>\n<li>\n<p dir=\"auto\">[ignoreWidgetSpan] determines whether <code>WidgetSpan</code> elements should be\nincluded in the gradient application. By default, widget spans are ignored.</p>\n</li>\n<li>\n<p dir=\"auto\">[renderMode] specifies how the gradient should be applied to the text. The default\nis [GradientRenderMode.fullText], meaning the gradient will apply to the entire text.</p>\n</li>\n<li>\n<p dir=\"auto\">[ignoreRegex] is a regular expression used to exclude certain parts of the text\nfrom the gradient effect. For example, it can be used to exclude specific characters\nor words (like emojis or special symbols) from the gradient application.</p>\n</li>\n<li>\n<p dir=\"auto\">[beforeDrawGradient] A callback function that is called before the gradient is drawn on the text.</p>\n</li>\n<li>\n<p dir=\"auto\">[blendMode] The blend mode to be used when applying the gradient.\ndefault: [BlendMode.srcIn] (i.e., the gradient will be applied to the text).\nIt's better to use [BlendMode.srcIn] or [BlendMode.srcATop].</p>\n</li>\n</ul>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  GradientConfig _config = GradientConfig(\n    gradient: const LinearGradient(\n      colors: &lt;Color&gt;[Colors.blue, Colors.red],\n    ),\n    ignoreRegex: GradientConfig.ignoreEmojiRegex,\n    ignoreWidgetSpan: true,\n    renderMode: GradientRenderMode.fullText,\n  );\"><pre>  <span class=\"pl-c1\">GradientConfig</span> _config <span class=\"pl-k\">=</span> <span class=\"pl-c1\">GradientConfig</span>(\n    gradient<span class=\"pl-k\">:</span> <span class=\"pl-k\">const</span> <span class=\"pl-c1\">LinearGradient</span>(\n      colors<span class=\"pl-k\">:</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-c1\">Color</span><span class=\"pl-k\">&gt;</span>[<span class=\"pl-c1\">Colors</span>.blue, <span class=\"pl-c1\">Colors</span>.red],\n    ),\n    ignoreRegex<span class=\"pl-k\">:</span> <span class=\"pl-c1\">GradientConfig</span>.ignoreEmojiRegex,\n    ignoreWidgetSpan<span class=\"pl-k\">:</span> <span class=\"pl-c1\">true</span>,\n    renderMode<span class=\"pl-k\">:</span> <span class=\"pl-c1\">GradientRenderMode</span>.fullText,\n  );</pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">IgnoreGradientSpan</h3><a id=\"user-content-ignoregradientspan\" class=\"anchor\" aria-label=\"Permalink: IgnoreGradientSpan\" href=\"#ignoregradientspan\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">The <code>InlineSpan</code> will always ignore the gradient.</p>\n<div class=\"highlight highlight-source-dart notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class IgnoreGradientTextSpan extends TextSpan with IgnoreGradientSpan {\n  IgnoreGradientTextSpan({String? text, List&lt;InlineSpan&gt;? children})\n      : super(\n          text: text,\n          children: children,\n        );\n}\"><pre><span class=\"pl-k\">class</span> <span class=\"pl-c1\">IgnoreGradientTextSpan</span> <span class=\"pl-k\">extends</span> <span class=\"pl-c1\">TextSpan</span> <span class=\"pl-k\">with</span> <span class=\"pl-c1\">IgnoreGradientSpan</span> {\n  <span class=\"pl-c1\">IgnoreGradientTextSpan</span>({<span class=\"pl-c1\">String</span><span class=\"pl-k\">?</span> text, <span class=\"pl-c1\">List</span>&lt;<span class=\"pl-c1\">InlineSpan</span>&gt;<span class=\"pl-k\">?</span> children})\n      <span class=\"pl-k\">:</span> <span class=\"pl-c1\">super</span>(\n          text<span class=\"pl-k\">:</span> text,\n          children<span class=\"pl-k\">:</span> children,\n        );\n}</pre></div>\n</article></div>"
}