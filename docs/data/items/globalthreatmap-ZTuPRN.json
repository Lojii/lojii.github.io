{
  "id": "globalthreatmap-ZTuPRN",
  "type": "repo",
  "name": "globalthreatmap",
  "nameEn": "globalthreatmap",
  "url": "https://github.com/unicodeveloper/globalthreatmap",
  "homepage": "https://globalthreatmap.up.railway.app",
  "summary": "全球威胁地图。了解战争、冲突、军事基地及各国历史。\n\nhttps://globalthreatmap.up.railway.app/",
  "description": "",
  "notes": "",
  "images": [
    "/assets/images/globalthreatmap-ZTuPRN/1.jpg",
    "/assets/images/globalthreatmap-ZTuPRN/2.jpg"
  ],
  "thumbnail": "/assets/images/globalthreatmap-ZTuPRN/thumb.jpg",
  "category": "tools",
  "tags": [
    "地图"
  ],
  "github": {
    "stars": 632,
    "forks": 115,
    "language": "TypeScript",
    "license": null,
    "lastUpdate": "2026-01-27",
    "topics": [
      "intelligence",
      "nato",
      "osint",
      "osint-tool",
      "real-time",
      "usa-military",
      "valyu-ai"
    ],
    "createdAt": "2026-01-22"
  },
  "archived": false,
  "createdAt": "2026-01-27T11:41:56.717Z",
  "updatedAt": "2026-01-27T11:41:56.717Z",
  "originalContent": "<div id=\"readme\" class=\"md\" data-path=\"README.md\"><article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">Global Threat &amp; Event Intelligence Map</h1><a id=\"user-content-global-threat--event-intelligence-map\" class=\"anchor\" aria-label=\"Permalink: Global Threat &amp; Event Intelligence Map\" href=\"#global-threat--event-intelligence-map\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">A real-time global situational awareness platform that plots security events, geopolitical developments, and threat indicators on an interactive map. Think of it as an OSINT (Open Source Intelligence) command center.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/e434b9e6763626086e8cf2925346ff6d2eca6c0acf377a0e6464c80a14b64903/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f676c6f62616c7468726561746d6170\"><img src=\"https://camo.githubusercontent.com/e434b9e6763626086e8cf2925346ff6d2eca6c0acf377a0e6464c80a14b64903/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f676c6f62616c7468726561746d6170\" alt=\"\" data-canonical-src=\"https://4ealzrotsszllxtz.public.blob.vercel-storage.com/globalthreatmap\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/3dcba47a04f343e7fceb7f39c45504e1946ed9e869afe0d96146f543b3f111bc/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f686973746f726963616c636f6e666c69637473\"><img src=\"https://camo.githubusercontent.com/3dcba47a04f343e7fceb7f39c45504e1946ed9e869afe0d96146f543b3f111bc/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f686973746f726963616c636f6e666c69637473\" alt=\"\" data-canonical-src=\"https://4ealzrotsszllxtz.public.blob.vercel-storage.com/historicalconflicts\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/84108fbd5822bbe63e69014fb74574a6e87220ac9a58e479b533f7d6d920ee04/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f68657a626f6c6c615f7265736561726368\"><img src=\"https://camo.githubusercontent.com/84108fbd5822bbe63e69014fb74574a6e87220ac9a58e479b533f7d6d920ee04/68747470733a2f2f3465616c7a726f7473737a6c6c78747a2e7075626c69632e626c6f622e76657263656c2d73746f726167652e636f6d2f68657a626f6c6c615f7265736561726368\" alt=\"\" data-canonical-src=\"https://4ealzrotsszllxtz.public.blob.vercel-storage.com/hezbolla_research\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\"><a href=\"https://railway.com/deploy/Klarxi?referralCode=yuv1Gy&amp;utm_medium=integration&amp;utm_source=template&amp;utm_campaign=generic\" rel=\"nofollow\"><img src=\"https://camo.githubusercontent.com/88cb27bf937b98276737ba7888269a1bc9495d8670f63e1acc908b3442841114/68747470733a2f2f7261696c7761792e636f6d2f627574746f6e2e737667\" alt=\"Deploy on Railway\" data-canonical-src=\"https://railway.com/button.svg\" style=\"max-width: 100%;\"></a></p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Features</h2><a id=\"user-content-features\" class=\"anchor\" aria-label=\"Permalink: Features\" href=\"#features\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Core Features</h3><a id=\"user-content-core-features\" class=\"anchor\" aria-label=\"Permalink: Core Features\" href=\"#core-features\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><strong>Real-Time Event Mapping</strong> - Plot breaking news events (conflicts, protests, natural disasters) on a world map with color-coded threat levels</li>\n<li><strong>Interactive Mapbox Map</strong> - Dark-themed map with clustering, heatmap visualization, and smooth navigation</li>\n<li><strong>Event Feed</strong> - Real-time filterable feed of global events with category and threat level filters</li>\n<li><strong>Intel Dossiers</strong> - Build intelligence dossiers on any actor with deep research reports, CSV data exports, and PowerPoint briefings</li>\n<li><strong>Alert System</strong> - Configure keyword and region-based alerts with real-time notifications</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Country Intelligence</h3><a id=\"user-content-country-intelligence\" class=\"anchor\" aria-label=\"Permalink: Country Intelligence\" href=\"#country-intelligence\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Click on any country to view detailed conflict intelligence:</p>\n<ul dir=\"auto\">\n<li><strong>Historical Conflicts</strong> - Wars, military engagements, and conflicts throughout history with dates, opposing parties, and outcomes</li>\n<li><strong>Current Conflicts</strong> - Ongoing wars, military tensions, border disputes, civil unrest, terrorism threats, and geopolitical tensions</li>\n<li><strong>Tabbed Interface</strong> - Current conflicts (red-themed) and Historical conflicts (blue-themed) displayed in separate tabs</li>\n<li><strong>Country Highlighting</strong> - Selected country fills with red color and blinks while loading data</li>\n<li><strong>AI-Powered Analysis</strong> - Conflict data synthesized using Valyu Answer API with cited sources</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Military Bases Layer</h3><a id=\"user-content-military-bases-layer\" class=\"anchor\" aria-label=\"Permalink: Military Bases Layer\" href=\"#military-bases-layer\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Visualize global military presence:</p>\n<ul dir=\"auto\">\n<li><strong>US Military Bases</strong> - Displayed as green markers (30+ bases worldwide)</li>\n<li><strong>NATO Installations</strong> - Displayed as blue markers</li>\n<li><strong>Base Details</strong> - Click any base to see its name, type, and host country</li>\n<li><strong>Automatic Loading</strong> - Military base data loads when the map initializes</li>\n<li><strong>Coverage</strong> - Includes bases in Europe, Asia-Pacific, Middle East, Africa, and the Americas</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Map Visualization</h3><a id=\"user-content-map-visualization\" class=\"anchor\" aria-label=\"Permalink: Map Visualization\" href=\"#map-visualization\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><strong>Auto-Pan Mode</strong> - Play/pause button to automatically pan across the globe</li>\n<li><strong>Event Clustering</strong> - Group nearby events for cleaner visualization at lower zoom levels</li>\n<li><strong>Heatmap View</strong> - Toggle heatmap to visualize event density</li>\n<li><strong>Entity Locations</strong> - When researching entities, their known locations appear as purple markers on the map</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Tech Stack</h2><a id=\"user-content-tech-stack\" class=\"anchor\" aria-label=\"Permalink: Tech Stack\" href=\"#tech-stack\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><strong>Framework</strong>: Next.js 16 (App Router)</li>\n<li><strong>Map</strong>: Mapbox GL JS + react-map-gl</li>\n<li><strong>UI</strong>: Tailwind CSS v4 + custom components</li>\n<li><strong>Intelligence API</strong>: valyu-js (search, answer, deep research)</li>\n<li><strong>Schema Validation</strong>: zod</li>\n<li><strong>State Management</strong>: Zustand</li>\n<li><strong>Markdown</strong>: react-markdown + remark-gfm</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Getting Started</h2><a id=\"user-content-getting-started\" class=\"anchor\" aria-label=\"Permalink: Getting Started\" href=\"#getting-started\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Prerequisites</h3><a id=\"user-content-prerequisites\" class=\"anchor\" aria-label=\"Permalink: Prerequisites\" href=\"#prerequisites\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li>Node.js 18+</li>\n<li>Mapbox account and API token</li>\n<li>Valyu API key</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Installation</h3><a id=\"user-content-installation\" class=\"anchor\" aria-label=\"Permalink: Installation\" href=\"#installation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ol dir=\"auto\">\n<li>Clone the repository and install dependencies:</li>\n</ol>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"npm install\"><pre>npm install</pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>Create a <code>.env.local</code> file in the root directory:</li>\n</ol>\n<div class=\"highlight highlight-source-dotenv notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"NEXT_PUBLIC_MAPBOX_TOKEN=your_mapbox_token_here\nVALYU_API_KEY=your_valyu_api_key_here\nNEXT_PUBLIC_APP_MODE=self-hosted\n\n# Optional: Enable AI-powered location extraction for better accuracy\nOPENAI_API_KEY=your_openai_api_key_here\"><pre><span class=\"pl-v\">NEXT_PUBLIC_MAPBOX_TOKEN</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your_mapbox_token_here</span>\n<span class=\"pl-v\">VALYU_API_KEY</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your_valyu_api_key_here</span>\n<span class=\"pl-v\">NEXT_PUBLIC_APP_MODE</span><span class=\"pl-k\">=</span><span class=\"pl-s\">self-hosted</span>\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Optional: Enable AI-powered location extraction for better accuracy</span>\n<span class=\"pl-v\">OPENAI_API_KEY</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your_openai_api_key_here</span></pre></div>\n<ol start=\"3\" dir=\"auto\">\n<li>\n<p dir=\"auto\">Get your API keys:</p>\n<ul dir=\"auto\">\n<li><strong>Mapbox</strong>: <a href=\"https://account.mapbox.com/access-tokens/\" rel=\"nofollow\">Get a token</a></li>\n<li><strong>Valyu</strong>: <a href=\"https://valyu.ai\" rel=\"nofollow\">Get an API key</a></li>\n<li><strong>OpenAI</strong> (optional): <a href=\"https://platform.openai.com/api-keys\" rel=\"nofollow\">Get an API key</a> - enables AI-powered location extraction</li>\n</ul>\n</li>\n<li>\n<p dir=\"auto\">Run the development server:</p>\n</li>\n</ol>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"npm run dev\"><pre>npm run dev</pre></div>\n<ol start=\"5\" dir=\"auto\">\n<li>Open <a href=\"http://localhost:3000\" rel=\"nofollow\">http://localhost:3000</a> in your browser.</li>\n</ol>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Project Structure</h2><a id=\"user-content-project-structure\" class=\"anchor\" aria-label=\"Permalink: Project Structure\" href=\"#project-structure\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"globalthreatmap/\n├── app/\n│   ├── layout.tsx              # Root layout\n│   ├── page.tsx                # Main dashboard\n│   ├── globals.css             # Global styles\n│   └── api/                    # API routes\n│       ├── events/             # Event fetching via Valyu\n│       ├── entities/           # Entity research\n│       ├── reports/            # Deep research reports\n│       ├── countries/\n│       │   └── conflicts/      # Country conflict intelligence\n│       └── military-bases/     # Military base data\n├── components/\n│   ├── map/                    # Map components\n│   │   ├── threat-map.tsx      # Main map component\n│   │   ├── timeline-scrubber.tsx # Auto-pan controls\n│   │   └── country-conflicts-modal.tsx # Conflict details modal\n│   ├── feed/                   # Event feed components\n│   ├── search/                 # Entity search components\n│   ├── alerts/                 # Alert management\n│   └── ui/                     # Base UI components\n│       └── markdown.tsx        # Markdown renderer\n├── lib/\n│   ├── valyu.ts                # Valyu client &amp; API functions\n│   ├── geocoding.ts            # Location extraction\n│   └── event-classifier.ts     # Event classification\n├── stores/\n│   └── map-store.ts            # Map state (viewport, layers, bases)\n├── types/                      # TypeScript types\n└── hooks/                      # React hooks\"><pre class=\"notranslate\"><code>globalthreatmap/\n├── app/\n│   ├── layout.tsx              # Root layout\n│   ├── page.tsx                # Main dashboard\n│   ├── globals.css             # Global styles\n│   └── api/                    # API routes\n│       ├── events/             # Event fetching via Valyu\n│       ├── entities/           # Entity research\n│       ├── reports/            # Deep research reports\n│       ├── countries/\n│       │   └── conflicts/      # Country conflict intelligence\n│       └── military-bases/     # Military base data\n├── components/\n│   ├── map/                    # Map components\n│   │   ├── threat-map.tsx      # Main map component\n│   │   ├── timeline-scrubber.tsx # Auto-pan controls\n│   │   └── country-conflicts-modal.tsx # Conflict details modal\n│   ├── feed/                   # Event feed components\n│   ├── search/                 # Entity search components\n│   ├── alerts/                 # Alert management\n│   └── ui/                     # Base UI components\n│       └── markdown.tsx        # Markdown renderer\n├── lib/\n│   ├── valyu.ts                # Valyu client &amp; API functions\n│   ├── geocoding.ts            # Location extraction\n│   └── event-classifier.ts     # Event classification\n├── stores/\n│   └── map-store.ts            # Map state (viewport, layers, bases)\n├── types/                      # TypeScript types\n└── hooks/                      # React hooks\n</code></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Usage</h2><a id=\"user-content-usage\" class=\"anchor\" aria-label=\"Permalink: Usage\" href=\"#usage\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Interactive Map</h3><a id=\"user-content-interactive-map\" class=\"anchor\" aria-label=\"Permalink: Interactive Map\" href=\"#interactive-map\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><strong>Click on a Country</strong> - Opens the Country Conflicts Modal showing historical and current conflicts</li>\n<li><strong>Click on an Event Marker</strong> - Shows event details popup</li>\n<li><strong>Click on a Military Base</strong> - Shows base name, type (US/NATO), and country</li>\n<li><strong>Zoom/Pan</strong> - Navigate the map or use auto-pan mode</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Event Feed</h3><a id=\"user-content-event-feed\" class=\"anchor\" aria-label=\"Permalink: Event Feed\" href=\"#event-feed\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">The event feed displays real-time global events. You can:</p>\n<ul dir=\"auto\">\n<li>Filter by threat level (Critical, High, Medium, Low, Info)</li>\n<li>Filter by category (Conflict, Protest, Disaster, Diplomatic, etc.)</li>\n<li>Search events by keyword</li>\n<li>Click on events to fly to their location on the map</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Auto-Pan Mode</h3><a id=\"user-content-auto-pan-mode\" class=\"anchor\" aria-label=\"Permalink: Auto-Pan Mode\" href=\"#auto-pan-mode\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">The play/pause button in the bottom-left corner toggles automatic map panning:</p>\n<ul dir=\"auto\">\n<li><strong>Play</strong> - Map continuously pans eastward across the globe</li>\n<li><strong>Pause</strong> - Stops the auto-pan animation</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Intel Dossiers (Deep Research)</h3><a id=\"user-content-intel-dossiers-deep-research\" class=\"anchor\" aria-label=\"Permalink: Intel Dossiers (Deep Research)\" href=\"#intel-dossiers-deep-research\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Build comprehensive intelligence dossiers on any actor using Valyu's Deep Research API. Enter any entity - nations, militias, PMCs, cartels, political figures - and receive:</p>\n<ul dir=\"auto\">\n<li><strong>~50 Page Intelligence Report</strong> - Extensively sourced analysis covering background, organizational structure, key figures, geographic presence, recent activities, threat assessment, and timeline of events</li>\n<li><strong>CSV Data Export</strong> - Structured data with locations, coordinates, key figures, related organizations, significant events with dates, and source URLs - ready for further analysis</li>\n<li><strong>PowerPoint Briefing</strong> - 8-slide executive intelligence briefing for presentations</li>\n<li><strong>PDF Report</strong> - Downloadable full report</li>\n</ul>\n<p dir=\"auto\">Reports take 5-10 minutes to generate but are extremely detailed and comprehensive, pulling from hundreds of sources across the web, academic papers, and proprietary databases. Perfect for OSINT analysts, researchers, and intelligence professionals who need exportable deliverables for briefings and further analysis.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Country Conflicts</h3><a id=\"user-content-country-conflicts\" class=\"anchor\" aria-label=\"Permalink: Country Conflicts\" href=\"#country-conflicts\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Click any country on the map to view:</p>\n<ul dir=\"auto\">\n<li><strong>Current Tab</strong> (Red) - Active conflicts, military tensions, and ongoing security threats</li>\n<li><strong>Historical Tab</strong> (Blue) - Past wars and military engagements with dates and outcomes</li>\n<li><strong>Sources</strong> - Cited references for all conflict information (Wikipedia excluded)</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Alerts</h3><a id=\"user-content-alerts\" class=\"anchor\" aria-label=\"Permalink: Alerts\" href=\"#alerts\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Create alert rules based on:</p>\n<ul dir=\"auto\">\n<li>Keywords (e.g., \"nuclear\", \"sanctions\")</li>\n<li>Threat levels</li>\n<li>Geographic regions (coming soon)</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">API Routes</h2><a id=\"user-content-api-routes\" class=\"anchor\" aria-label=\"Permalink: API Routes\" href=\"#api-routes\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>Route</th>\n<th>Method</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>/api/events</code></td>\n<td>GET</td>\n<td>Fetch global events from Valyu</td>\n</tr>\n<tr>\n<td><code>/api/events</code></td>\n<td>POST</td>\n<td>Fetch events with custom queries</td>\n</tr>\n<tr>\n<td><code>/api/entities</code></td>\n<td>GET/POST</td>\n<td>Research entities and get locations</td>\n</tr>\n<tr>\n<td><code>/api/deepresearch</code></td>\n<td>POST</td>\n<td>Create async deep research task with deliverables</td>\n</tr>\n<tr>\n<td><code>/api/deepresearch/[taskId]</code></td>\n<td>GET</td>\n<td>Poll deep research task status and results</td>\n</tr>\n<tr>\n<td><code>/api/reports</code></td>\n<td>POST</td>\n<td>Generate deep research reports</td>\n</tr>\n<tr>\n<td><code>/api/countries/conflicts</code></td>\n<td>GET</td>\n<td>Get historical and current conflicts for a country</td>\n</tr>\n<tr>\n<td><code>/api/military-bases</code></td>\n<td>GET</td>\n<td>Get US and NATO military base locations (1hr cache)</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Valyu Integration</h2><a id=\"user-content-valyu-integration\" class=\"anchor\" aria-label=\"Permalink: Valyu Integration\" href=\"#valyu-integration\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">This app uses <a href=\"https://valyu.ai\" rel=\"nofollow\">Valyu</a> for intelligence data:</p>\n<ul dir=\"auto\">\n<li><strong>Search API</strong> - Finding global events and news</li>\n<li><strong>Answer API</strong> - Synthesizing conflict intelligence and military base data</li>\n<li><strong>Deep Research</strong> - Comprehensive entity analysis</li>\n</ul>\n<p dir=\"auto\">Wikipedia is excluded from search results.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Authentication</h2><a id=\"user-content-authentication\" class=\"anchor\" aria-label=\"Permalink: Authentication\" href=\"#authentication\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Global Threat Map supports two app modes controlled by the <code>NEXT_PUBLIC_APP_MODE</code> environment variable.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">App Modes</h3><a id=\"user-content-app-modes\" class=\"anchor\" aria-label=\"Permalink: App Modes\" href=\"#app-modes\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>Mode</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>self-hosted</code></td>\n<td>Default mode. No authentication required. All features are freely accessible.</td>\n</tr>\n<tr>\n<td><code>valyu</code></td>\n<td>OAuth mode. Users sign in with Valyu to access additional features.</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Self-Hosted Mode (Default)</h3><a id=\"user-content-self-hosted-mode-default\" class=\"anchor\" aria-label=\"Permalink: Self-Hosted Mode (Default)\" href=\"#self-hosted-mode-default\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">In self-hosted mode, the app runs entirely with your own Valyu API key:</p>\n<div class=\"highlight highlight-source-dotenv notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"NEXT_PUBLIC_APP_MODE=self-hosted\nVALYU_API_KEY=your_valyu_api_key_here\"><pre><span class=\"pl-v\">NEXT_PUBLIC_APP_MODE</span><span class=\"pl-k\">=</span><span class=\"pl-s\">self-hosted</span>\n<span class=\"pl-v\">VALYU_API_KEY</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your_valyu_api_key_here</span></pre></div>\n<ul dir=\"auto\">\n<li>No sign-in panel is displayed</li>\n<li>All features are available to all users</li>\n<li>API usage is billed to your Valyu account</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Valyu OAuth Mode</h3><a id=\"user-content-valyu-oauth-mode\" class=\"anchor\" aria-label=\"Permalink: Valyu OAuth Mode\" href=\"#valyu-oauth-mode\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">In valyu mode, users authenticate with their Valyu accounts:</p>\n<div class=\"highlight highlight-source-dotenv notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"NEXT_PUBLIC_APP_MODE=valyu\n\n# OAuth Configuration (contact contact@valyu.ai for credentials)\nNEXT_PUBLIC_VALYU_AUTH_URL=https://auth.valyu.ai\nNEXT_PUBLIC_VALYU_CLIENT_ID=your-client-id\nVALYU_CLIENT_SECRET=your-client-secret\nVALYU_APP_URL=https://platform.valyu.ai\nNEXT_PUBLIC_REDIRECT_URI=http://localhost:3000/auth/valyu/callback\"><pre><span class=\"pl-v\">NEXT_PUBLIC_APP_MODE</span><span class=\"pl-k\">=</span><span class=\"pl-s\">valyu</span>\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> OAuth Configuration (contact contact@valyu.ai for credentials)</span>\n<span class=\"pl-v\">NEXT_PUBLIC_VALYU_AUTH_URL</span><span class=\"pl-k\">=</span><span class=\"pl-s\">https://auth.valyu.ai</span>\n<span class=\"pl-v\">NEXT_PUBLIC_VALYU_CLIENT_ID</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your-client-id</span>\n<span class=\"pl-v\">VALYU_CLIENT_SECRET</span><span class=\"pl-k\">=</span><span class=\"pl-s\">your-client-secret</span>\n<span class=\"pl-v\">VALYU_APP_URL</span><span class=\"pl-k\">=</span><span class=\"pl-s\">https://platform.valyu.ai</span>\n<span class=\"pl-v\">NEXT_PUBLIC_REDIRECT_URI</span><span class=\"pl-k\">=</span><span class=\"pl-s\">http://localhost:3000/auth/valyu/callback</span></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Feature Gating (Valyu Mode)</h3><a id=\"user-content-feature-gating-valyu-mode\" class=\"anchor\" aria-label=\"Permalink: Feature Gating (Valyu Mode)\" href=\"#feature-gating-valyu-mode\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">When running in valyu mode, certain features require authentication:</p>\n<markdown-accessiblity-table><table>\n<thead>\n<tr>\n<th>Feature</th>\n<th>Unauthenticated</th>\n<th>Authenticated</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>View map &amp; events</td>\n<td>✅ Free</td>\n<td>✅ Free</td>\n</tr>\n<tr>\n<td>Event feed</td>\n<td>✅ Free</td>\n<td>✅ Free</td>\n</tr>\n<tr>\n<td>Country conflicts</td>\n<td>✅ 2 free lookups</td>\n<td>✅ Unlimited</td>\n</tr>\n<tr>\n<td>Entity search</td>\n<td>❌ Blocked</td>\n<td>✅ Unlimited</td>\n</tr>\n<tr>\n<td>Military bases</td>\n<td>✅ Free</td>\n<td>✅ Free</td>\n</tr>\n</tbody>\n</table></markdown-accessiblity-table>\n<p dir=\"auto\">After users exhaust their free usage, a sign-in modal prompts them to authenticate.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">OAuth Flow</h3><a id=\"user-content-oauth-flow\" class=\"anchor\" aria-label=\"Permalink: OAuth Flow\" href=\"#oauth-flow\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">The authentication uses OAuth 2.0 with PKCE (Proof Key for Code Exchange):</p>\n<ol dir=\"auto\">\n<li>User clicks \"Sign in with Valyu\"</li>\n<li>App generates PKCE code verifier and challenge</li>\n<li>User is redirected to Valyu's authorization page</li>\n<li>After authentication, Valyu redirects back to <code>/auth/valyu/callback</code></li>\n<li>App exchanges authorization code for access token</li>\n<li>User info is stored in localStorage</li>\n</ol>\n<div class=\"markdown-heading\" dir=\"auto\"><h3 class=\"heading-element\" dir=\"auto\">Project Structure (Auth)</h3><a id=\"user-content-project-structure-auth\" class=\"anchor\" aria-label=\"Permalink: Project Structure (Auth)\" href=\"#project-structure-auth\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"globalthreatmap/\n├── app/\n│   ├── api/oauth/token/       # Token exchange endpoint\n│   └── auth/valyu/callback/   # OAuth callback page\n├── components/auth/\n│   ├── sign-in-panel.tsx      # Floating auth panel\n│   └── sign-in-modal.tsx      # Sign-in dialog\n├── stores/\n│   └── auth-store.ts          # Auth state management\n└── lib/\n    └── oauth.ts               # PKCE utilities\"><pre class=\"notranslate\"><code>globalthreatmap/\n├── app/\n│   ├── api/oauth/token/       # Token exchange endpoint\n│   └── auth/valyu/callback/   # OAuth callback page\n├── components/auth/\n│   ├── sign-in-panel.tsx      # Floating auth panel\n│   └── sign-in-modal.tsx      # Sign-in dialog\n├── stores/\n│   └── auth-store.ts          # Auth state management\n└── lib/\n    └── oauth.ts               # PKCE utilities\n</code></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">License</h2><a id=\"user-content-license\" class=\"anchor\" aria-label=\"Permalink: License\" href=\"#license\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">MIT</p>\n</article></div>"
}