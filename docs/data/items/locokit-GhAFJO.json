{
  "id": "locokit-GhAFJO",
  "type": "repo",
  "name": "LocoKit",
  "nameEn": "LocoKit",
  "url": "https://github.com/sobri909/LocoKit",
  "homepage": "https://www.bigpaua.com/locokit/",
  "summary": "一个基于机器学习的iOS位置记录和活动检测框架。\n\n对核心运动活动类型（静止、步行、跑步、骑自行车、驾车）的检测\n\n区分具体的交通工具类型（汽车、火车、公共汽车、摩托车、飞机、轮船）\n\n合并简化的核心定位和核心运动记录\n经过过滤、平滑和简化的位置和运动数据\n近实时静止/运动状态检测\n自动能源使用管理，支持全天记录\n自动停止和重新开始录制，避免浪费电池电量\nhttps://www.bigpaua.com/locokit/",
  "description": "",
  "notes": "",
  "images": [
    "/assets/images/locokit-GhAFJO/1.jpg",
    "/assets/images/locokit-GhAFJO/2.jpg",
    "/assets/images/locokit-GhAFJO/3.jpg",
    "/assets/images/locokit-GhAFJO/4.jpg",
    "/assets/images/locokit-GhAFJO/5.jpg",
    "/assets/images/locokit-GhAFJO/6.jpg",
    "/assets/images/locokit-GhAFJO/7.jpg",
    "/assets/images/locokit-GhAFJO/8.jpg"
  ],
  "thumbnail": "/assets/images/locokit-GhAFJO/thumb.jpg",
  "category": "iOS",
  "tags": [
    "运动"
  ],
  "github": {
    "stars": 1540,
    "forks": 106,
    "language": "Swift",
    "license": "LGPL-3.0",
    "lastUpdate": "2026-01-10",
    "topics": [
      "corelocation",
      "coremotion",
      "framework",
      "gps",
      "ios",
      "location",
      "swift"
    ],
    "createdAt": "2017-07-14"
  },
  "archived": false,
  "createdAt": "2026-01-23",
  "updatedAt": "2026-01-23",
  "originalContent": "<div id=\"readme\" class=\"md\" data-path=\"README.md\"><article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">LocoKit</h1><a id=\"user-content-locokit\" class=\"anchor\" aria-label=\"Permalink: LocoKit\" href=\"#locokit\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">A Machine Learning based location recording and activity detection framework for iOS.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Location and Motion Recording</h2><a id=\"user-content-location-and-motion-recording\" class=\"anchor\" aria-label=\"Permalink: Location and Motion Recording\" href=\"#location-and-motion-recording\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li>Combined, simplified Core Location and Core Motion recording</li>\n<li>Filtered, smoothed, and simplified location and motion data</li>\n<li>Near real time stationary / moving state detection</li>\n<li>Automatic energy use management, enabling all day recording</li>\n<li>Automatic stopping and restarting of recording, to avoid wasteful battery use</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Activity Type Detection</h2><a id=\"user-content-activity-type-detection\" class=\"anchor\" aria-label=\"Permalink: Activity Type Detection\" href=\"#activity-type-detection\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li>Machine Learning based activity type detection</li>\n<li>Improved detection of Core Motion activity types (stationary, walking, running, cycling,\nautomotive)</li>\n<li>Distinguish between specific transport types (car, train, bus, motorcycle, airplane, boat)</li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Record High Level Visits and Paths</h2><a id=\"user-content-record-high-level-visits-and-paths\" class=\"anchor\" aria-label=\"Permalink: Record High Level Visits and Paths\" href=\"#record-high-level-visits-and-paths\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li>Optionally produce high level <code>Path</code> and <code>Visit</code> timeline items, to represent the recording\nsession at human level. Similar to Core Location's <code>CLVisit</code>, but with much higher accuracy, much\nmore detail, and with the addition of Paths (ie the trips between Visits).</li>\n<li>Optionally persist your recorded samples and timeline items to a local SQL based store, for\nretention between sessions.</li>\n</ul>\n<p dir=\"auto\"><a href=\"https://github.com/sobri909/LocoKit/blob/master/TimelineItemDescription.md\">More information about timeline items can be found here</a></p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Supporting the Project</h2><a id=\"user-content-supporting-the-project\" class=\"anchor\" aria-label=\"Permalink: Supporting the Project\" href=\"#supporting-the-project\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">LocoKit is an LGPL licensed open source project. Its ongoing development is made possible\nthanks to the support of its backers on Patreon.</p>\n<ul dir=\"auto\">\n<li><a href=\"https://www.patreon.com/sobri909\" rel=\"nofollow\">patreon.com/sobri909</a></li>\n</ul>\n<p dir=\"auto\">If you have an app that uses LocoKit and is a revenue generating product, please consider\nsponsoring LocoKit development, to ensure the project that your product relies on stays\nhealthy and actively maintained.</p>\n<p dir=\"auto\">Thanks so much for your support!</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">Installation</h1><a id=\"user-content-installation\" class=\"anchor\" aria-label=\"Permalink: Installation\" href=\"#installation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"pod 'LocoKit'\npod 'LocoKit/LocalStore' # optional\"><pre><span class=\"pl-en\">pod</span> <span class=\"pl-s\">'LocoKit'</span>\n<span class=\"pl-en\">pod</span> <span class=\"pl-s\">'LocoKit/LocalStore'</span> <span class=\"pl-c\"># optional</span></pre></div>\n<p dir=\"auto\"><strong>Note:</strong> Include the optional <code>LocoKit/LocalStore</code> subspec if you would like to retain your samples\nand timeline items in the SQL persistent store.</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">High Level Recording</h1><a id=\"user-content-high-level-recording\" class=\"anchor\" aria-label=\"Permalink: High Level Recording\" href=\"#high-level-recording\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Record TimelineItems (Paths and Visits)</h2><a id=\"user-content-record-timelineitems-paths-and-visits\" class=\"anchor\" aria-label=\"Permalink: Record TimelineItems (Paths and Visits)\" href=\"#record-timelineitems-paths-and-visits\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// retain a timeline manager\nself.timeline = TimelineManager()\n\n// start recording, and producing timeline items \nself.timeline.startRecording()\n\n// observe timeline item updates\nwhen(timeline, does: .updatedTimelineItem) { _ in\n    let currentItem = timeline.currentItem\n\n    // duration of the current Path or Visit\n    print(&quot;item.duration: \\(currentItem.duration)&quot;)\n\n    // activity type of the current Path (eg walking, cycling, car)\n    if let path = currentItem as? Path {\n        print(&quot;path.activityType: \\(path.activityType)&quot;)\n    }\n\n    // examine each of the LocomotionSamples within the Path or Visit\n    for sample in currentItem.samples {\n        print(&quot;sample: \\(sample)&quot;)\n    }\n}\"><pre>// retain a timeline manager\n<span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span>timeline <span class=\"pl-c1\">=</span> <span class=\"pl-en\">TimelineManager</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n\n// start recording, and producing timeline items \n<span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span>timeline<span class=\"pl-kos\">.</span><span class=\"pl-en\">startRecording</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span>\n\n// observe timeline item updates\n<span class=\"pl-en\">when</span><span class=\"pl-kos\">(</span>timeline<span class=\"pl-kos\">,</span> does<span class=\"pl-kos\">:</span> <span class=\"pl-kos\">.</span>updatedTimelineItem<span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> _ <span class=\"pl-k\">in</span>\n    <span class=\"pl-k\">let</span> <span class=\"pl-s1\">currentItem</span> <span class=\"pl-c1\">=</span> timeline<span class=\"pl-kos\">.</span>currentItem\n\n    // duration of the current Path or Visit\n    <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"</span><span class=\"pl-s\">item.duration: </span><span class=\"pl-kos\">\\(</span>currentItem<span class=\"pl-kos\">.</span>duration<span class=\"pl-kos\">)</span><span class=\"pl-s\">\"</span><span class=\"pl-kos\">)</span>\n\n    // activity type of the current Path (eg walking, cycling, car)\n    <span class=\"pl-k\">if</span> <span class=\"pl-k\">let</span> path <span class=\"pl-c1\">=</span> currentItem <span class=\"pl-k\">as?</span> <span class=\"pl-smi\">Path</span> <span class=\"pl-kos\">{</span>\n        <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"</span><span class=\"pl-s\">path.activityType: </span><span class=\"pl-kos\">\\(</span>path<span class=\"pl-kos\">.</span>activityType<span class=\"pl-kos\">)</span><span class=\"pl-s\">\"</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n\n    // examine each of the LocomotionSamples within the Path or Visit\n    <span class=\"pl-k\">for</span> <span class=\"pl-s1\">sample</span> <span class=\"pl-k\">in</span> currentItem<span class=\"pl-kos\">.</span>samples <span class=\"pl-kos\">{</span>\n        <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"</span><span class=\"pl-s\">sample: </span><span class=\"pl-kos\">\\(</span>sample<span class=\"pl-kos\">)</span><span class=\"pl-s\">\"</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h1 class=\"heading-element\" dir=\"auto\">Low Level Recording</h1><a id=\"user-content-low-level-recording\" class=\"anchor\" aria-label=\"Permalink: Low Level Recording\" href=\"#low-level-recording\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Record LocomotionSamples (CLLocations combined with Core Motion data)</h2><a id=\"user-content-record-locomotionsamples-cllocations-combined-with-core-motion-data\" class=\"anchor\" aria-label=\"Permalink: Record LocomotionSamples (CLLocations combined with Core Motion data)\" href=\"#record-locomotionsamples-cllocations-combined-with-core-motion-data\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// the recording manager singleton\nlet loco = LocomotionManager.highlander\"><pre>// the recording manager singleton\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">loco</span> <span class=\"pl-c1\">=</span> <span class=\"pl-smi\">LocomotionManager</span><span class=\"pl-kos\">.</span>highlander</pre></div>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// decide which Core Motion features to include\nloco.recordPedometerEvents = true\nloco.recordAccelerometerEvents = true\nloco.recordCoreMotionActivityTypeEvents = true\"><pre>// decide which Core Motion features to include\nloco<span class=\"pl-kos\">.</span>recordPedometerEvents <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\nloco<span class=\"pl-kos\">.</span>recordAccelerometerEvents <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\nloco<span class=\"pl-kos\">.</span>recordCoreMotionActivityTypeEvents <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span></pre></div>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// decide whether to use &quot;sleep mode&quot; to allow for all day recording \nloco.useLowPowerSleepModeWhileStationary = true\"><pre>// decide whether to use \"sleep mode\" to allow for all day recording \nloco<span class=\"pl-kos\">.</span>useLowPowerSleepModeWhileStationary <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span></pre></div>\n<p dir=\"auto\"><strong>Note:</strong> The above settings are all on by default. The above snippets are unnecessary, and just here\nto show you some of the available options.</p>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// start recording \nloco.startRecording()\"><pre>// start recording \nloco<span class=\"pl-kos\">.</span><span class=\"pl-en\">startRecording</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span></pre></div>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// watch for updated LocomotionSamples\nwhen(loco, does: .locomotionSampleUpdated) { _ in\n\n    // the raw CLLocation\n    print(loco.rawLocation)\n\n    // a more usable, de-noised CLLocation\n    print(loco.filteredLocation)\n\n    // a smoothed, simplified, combined location and motion sample\n    print(loco.locomotionSample())\n}\"><pre>// watch for updated LocomotionSamples\n<span class=\"pl-en\">when</span><span class=\"pl-kos\">(</span>loco<span class=\"pl-kos\">,</span> does<span class=\"pl-kos\">:</span> <span class=\"pl-kos\">.</span>locomotionSampleUpdated<span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> _ <span class=\"pl-k\">in</span>\n\n    // the raw CLLocation\n    <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span>loco<span class=\"pl-kos\">.</span>rawLocation<span class=\"pl-kos\">)</span>\n\n    // a more usable, de-noised CLLocation\n    <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span>loco<span class=\"pl-kos\">.</span>filteredLocation<span class=\"pl-kos\">)</span>\n\n    // a smoothed, simplified, combined location and motion sample\n    <span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span>loco<span class=\"pl-kos\">.</span><span class=\"pl-en\">locomotionSample</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Fetching TimelineItems / Samples</h2><a id=\"user-content-fetching-timelineitems--samples\" class=\"anchor\" aria-label=\"Permalink: Fetching TimelineItems / Samples\" href=\"#fetching-timelineitems--samples\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">If you wanted to get all timeline items between the start of today and now, you might do this:</p>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"let date = Date() // some specific day\nlet items = store.items(\n        where: &quot;deleted = 0 AND endDate &gt; ? AND startDate &lt; ? ORDER BY endDate&quot;,\n        arguments: [date.startOfDay, date.endOfDay])\"><pre><span class=\"pl-k\">let</span> <span class=\"pl-s1\">date</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">Date</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span> // some specific day\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">items</span> <span class=\"pl-c1\">=</span> store<span class=\"pl-kos\">.</span><span class=\"pl-en\">items</span><span class=\"pl-kos\">(</span>\n        where<span class=\"pl-kos\">:</span> <span class=\"pl-s\">\"</span><span class=\"pl-s\">deleted = 0 AND endDate &gt; ? AND startDate &lt; ? ORDER BY endDate</span><span class=\"pl-s\">\"</span><span class=\"pl-kos\">,</span>\n        arguments<span class=\"pl-kos\">:</span> <span class=\"pl-kos\">[</span>date<span class=\"pl-kos\">.</span>startOfDay<span class=\"pl-kos\">,</span> date<span class=\"pl-kos\">.</span>endOfDay<span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">You can also construct more complex queries, like for fetching all timeline items that overlap a certain geographic region. Or all samples of a specific activity type (eg all \"car\" samples). Or all timeline items that contain samples over a certain speed (eg paths containing fast driving).</p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Detect Activity Types</h2><a id=\"user-content-detect-activity-types\" class=\"anchor\" aria-label=\"Permalink: Detect Activity Types\" href=\"#detect-activity-types\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">Note that if you are using a <code>TimelineManager</code>, activity type classifying is already handled\nfor you by the manager, on both the sample and timeline item levels. You should only need to\ndirectly interact with clasifiers if you are either not using a TimelineManager, or are wanting\nto do low level processing at the sample level.</p>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// fetch a geographically relevant classifier\nlet classifier = ActivityTypeClassifier(coordinate: location.coordinate)\n\n// classify a locomotion sample\nlet results = classifier.classify(sample)\n\n// get the best match activity type\nlet bestMatch = results.first\n\n// print the best match type's name (&quot;walking&quot;, &quot;car&quot;, etc)\nprint(bestMatch.name)\"><pre>// fetch a geographically relevant classifier\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">classifier</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">ActivityTypeClassifier</span><span class=\"pl-kos\">(</span>coordinate<span class=\"pl-kos\">:</span> location<span class=\"pl-kos\">.</span>coordinate<span class=\"pl-kos\">)</span>\n\n// classify a locomotion sample\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">results</span> <span class=\"pl-c1\">=</span> classifier<span class=\"pl-kos\">.</span><span class=\"pl-en\">classify</span><span class=\"pl-kos\">(</span>sample<span class=\"pl-kos\">)</span>\n\n// get the best match activity type\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">bestMatch</span> <span class=\"pl-c1\">=</span> results<span class=\"pl-kos\">.</span>first\n\n// print the best match type's name (\"walking\", \"car\", etc)\n<span class=\"pl-en\">print</span><span class=\"pl-kos\">(</span>bestMatch<span class=\"pl-kos\">.</span>name<span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\"><strong>Note:</strong> The above code snippets use <a href=\"https://github.com/sobri909/SwiftNotes\">SwiftNotes</a> to make\nthe event observing code easier to read. If you're not using SwiftNotes, your observers should be\nwritten something like this:</p>\n<div class=\"highlight highlight-source-swift notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"let noteCenter = NotificationCenter.default\nlet queue = OperationQueue.main \n\n// watch for updates\nnoteCenter.addObserver(forName: .locomotionSampleUpdated, object: loco, queue: queue) { _ in\n    // do stuff\n}\"><pre><span class=\"pl-k\">let</span> <span class=\"pl-s1\">noteCenter</span> <span class=\"pl-c1\">=</span> <span class=\"pl-smi\">NotificationCenter</span><span class=\"pl-kos\">.</span>default\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">queue</span> <span class=\"pl-c1\">=</span> <span class=\"pl-smi\">OperationQueue</span><span class=\"pl-kos\">.</span>main \n\n// watch for updates\nnoteCenter<span class=\"pl-kos\">.</span><span class=\"pl-en\">addObserver</span><span class=\"pl-kos\">(</span>forName<span class=\"pl-kos\">:</span> <span class=\"pl-kos\">.</span>locomotionSampleUpdated<span class=\"pl-kos\">,</span> object<span class=\"pl-kos\">:</span> loco<span class=\"pl-kos\">,</span> queue<span class=\"pl-kos\">:</span> queue<span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> _ <span class=\"pl-k\">in</span>\n    // do stuff\n<span class=\"pl-kos\">}</span></pre></div>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Background Location Monitoring</h2><a id=\"user-content-background-location-monitoring\" class=\"anchor\" aria-label=\"Permalink: Background Location Monitoring\" href=\"#background-location-monitoring\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<p dir=\"auto\">If you want the app to be relaunched after the user force quits, enable significant location change monitoring.</p>\n<p dir=\"auto\"><a href=\"https://github.com/sobri909/LocoKit/blob/master/BackgroundLocationMonitoring.md\">More details and requirements here</a></p>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Examples and Screenshots</h2><a id=\"user-content-examples-and-screenshots\" class=\"anchor\" aria-label=\"Permalink: Examples and Screenshots\" href=\"#examples-and-screenshots\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><a href=\"https://github.com/sobri909/LocoKit/blob/master/LocationFilteringExamples.md\">Location filtering\nexamples</a></li>\n<li><a href=\"https://github.com/sobri909/LocoKit/blob/master/ActivityTypeClassifierExamples.md\">Activity type detection examples</a></li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Documentation</h2><a id=\"user-content-documentation\" class=\"anchor\" aria-label=\"Permalink: Documentation\" href=\"#documentation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li><a href=\"https://www.bigpaua.com/arckit/docs\" rel=\"nofollow\">LocoKit API reference</a></li>\n<li><a href=\"https://www.bigpaua.com/arckit/docs_core\" rel=\"nofollow\">LocoKitCore API reference</a></li>\n</ul>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Try the LocoKit Demo App</h2><a id=\"user-content-try-the-locokit-demo-app\" class=\"anchor\" aria-label=\"Permalink: Try the LocoKit Demo App\" href=\"#try-the-locokit-demo-app\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ol dir=\"auto\">\n<li>Download or clone this repository</li>\n<li><code>pod install</code></li>\n<li>In Xcode, change the Demo App project's \"Team\" to match your Apple Developer Account</li>\n<li>In Xcode, change the Demo App project's \"Bundle Identifier\" to something unique</li>\n<li>Build and run!</li>\n<li>Go for a walk, cycle, drive, etc, and see the results :)</li>\n</ol>\n<div class=\"markdown-heading\" dir=\"auto\"><h2 class=\"heading-element\" dir=\"auto\">Try Arc App on the App Store</h2><a id=\"user-content-try-arc-app-on-the-app-store\" class=\"anchor\" aria-label=\"Permalink: Try Arc App on the App Store\" href=\"#try-arc-app-on-the-app-store\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div>\n<ul dir=\"auto\">\n<li>To see the SDK in action in a live, production app, install\n<a href=\"https://itunes.apple.com/app/arc-app-location-activity-tracker/id1063151918?mt=8\" rel=\"nofollow\">Arc App</a>\nfrom the App Store, our free life logging app based on LocoKit</li>\n</ul>\n</article></div>"
}